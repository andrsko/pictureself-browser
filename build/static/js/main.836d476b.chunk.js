(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{215:function(e,t,a){},267:function(e,t,a){e.exports=a.p+"static/media/logo.9885d522.svg"},290:function(e,t,a){e.exports=a(568)},295:function(e,t,a){},301:function(e,t,a){},392:function(e,t,a){},401:function(e,t,a){},423:function(e,t,a){},424:function(e,t,a){},425:function(e,t,a){},426:function(e,t,a){},427:function(e,t,a){},428:function(e,t,a){},429:function(e,t,a){},430:function(e,t,a){},431:function(e,t,a){},501:function(e,t,a){},502:function(e,t,a){},503:function(e,t,a){},504:function(e,t,a){},505:function(e,t,a){},558:function(e,t,a){},559:function(e,t,a){},560:function(e,t,a){},561:function(e,t,a){},562:function(e,t,a){},563:function(e,t,a){},564:function(e,t,a){},565:function(e,t,a){},566:function(e,t,a){},567:function(e,t,a){},568:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(52),s=a.n(i),o=(a(295),a(296),a(27)),c=a(590),l=a(592),u=a(581),d=a(251),h=a(8),p=a(9),m=a(12),f=a(10),g=a(11),b=a(577),v=a(576),E=a(569),O=a(589),_=(a(301),function(e){function t(){return Object(h.a)(this,t),Object(m.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"navlinkContainer"},r.a.createElement(v.a,{to:"/"},r.a.createElement(E.a,{style:{"background-color":"transparent","font-family":'"Arial", Helvetica, sans-serif',"font-weight":"normal",margin:"0",color:"rgb(55,55,55)",padding:"10px"},content:"Home",size:"large"})),r.a.createElement(v.a,{to:"/browse"},r.a.createElement(E.a,{style:{"background-color":"transparent","font-family":'"Arial", Helvetica, sans-serif',"font-weight":"normal",margin:"0",color:"rgb(55,55,55)",padding:"10px"},content:"Browse",size:"large"})),r.a.createElement(O.a,{trigger:r.a.createElement(E.a,{style:{"background-color":"transparent","font-family":'"Arial", Helvetica, sans-serif',"font-weight":"bold","font-size":"20px",margin:"0",color:"rgb(55,55,55)",padding:"10px"},content:"\u22ef",size:"large"}),flowing:!0,hoverable:!0,on:"click",position:"bottom center"},r.a.createElement(v.a,{to:"/about"},r.a.createElement("p",{className:"navlink-ellipsis-link"},"About")),r.a.createElement(v.a,{to:"/blog"},r.a.createElement("p",{className:"navlink-ellipsis-link"},"Blog")),r.a.createElement(v.a,{to:"/terms"},r.a.createElement("p",{className:"navlink-ellipsis-link"},"Terms")),r.a.createElement(v.a,{to:"/privacy"},r.a.createElement("p",{className:"navlink-ellipsis-link"},"Privacy Policy")),r.a.createElement(v.a,{to:"/help"},r.a.createElement("p",{className:"navlink-ellipsis-link"},"Help"))))}}]),t}(n.Component)),y=Object(b.a)(_),j=(a(215),function(e){function t(){return Object(h.a)(this,t),Object(m.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this.props,t=e.showLogin,a=e.showRegister;return r.a.createElement("div",{className:"guestMenu"},r.a.createElement(E.a,{style:{"background-color":"transparent","font-family":'"Arial", Helvetica, sans-serif',"font-weight":"normal","font-size":"14px",margin:"0",color:"rgb(55,55,55)",border:"1px solid rgb(215,215,215)"},content:"Log in",size:"large",id:"btn-log-in",onClick:t,compact:!0}),r.a.createElement(E.a,{style:{"background-color":"transparent","font-family":'"Arial", Helvetica, sans-serif',"font-weight":"normal","font-size":"14px",margin:"0",color:"rgb(55,55,55)"},id:"btn-sign-up",content:"Sign up",size:"large",onClick:a}))}}]),t}(n.Component)),S=j,C=a(278),w=(a(392),function(e){var t=e.className,a=e.avatar,n=e.centered,i=e.link;a=a||"https://afcm.ca/wp-content/uploads/2018/06/no-photo.png",n=null===n||n,t=t||"avatar";var s=r.a.createElement(C.a,{className:t,src:a,centered:n});return i?r.a.createElement(v.a,{to:i},s):s}),k=a(584),I=a(69),L=function(e){function t(){return Object(h.a)(this,t),Object(m.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this.props,t=e.username,a=e.logout,n=e.showEditProfile,i=e.history,s=e.name,o=""==this.props.avatar?"https://afcm.ca/wp-content/uploads/2018/06/no-photo.png":this.props.avatar;return r.a.createElement("div",{className:"userMenuOuter"},r.a.createElement(O.a,{position:"bottom center",mouseEnterDelay:750,verticalOffset:3,trigger:r.a.createElement(E.a,{style:{"background-color":"transparent","font-family":'"Arial", Helvetica, sans-serif',"font-weight":"normal","font-size":"28px","margin-left":"0px","margin-right":"5px",color:"rgb(55,55,55)",padding:"10px"},content:"+",size:"large",onClick:function(){i.push("/p/0/edit")}}),content:"New Pictureself",size:"large",style:{borderRadius:3,opacity:.8,"padding-top":"0.25em","padding-bottom":"0.25em","padding-left":"0.5em","padding-right":"0.5em"},inverted:!0,basic:!0}),r.a.createElement(k.a,{id:"usermenu-dropdown",selection:!0,compact:!0,trigger:r.a.createElement("div",{style:{display:"flex","align-items":"center","min-width":"125px"}},r.a.createElement("div",null,r.a.createElement(C.a,{id:"usermenu-dropdown-avatar",src:o})),r.a.createElement("div",null,r.a.createElement("p",{style:{"margin-left":"10px","margin-right":"0px",color:"rgb(55,55,55)","font-size":"16px"}},s||t)),r.a.createElement("div",{style:{display:"block","text-align":"right"}},r.a.createElement(I.a,{style:{"margin-left":"5px",color:"rgb(55,55,55)"},name:"caret down"}))),icon:"null"},r.a.createElement(k.a.Menu,{style:{"border-color":"white"}},r.a.createElement(k.a.Item,{onClick:function(){i.push("/".concat(t))},style:{color:"rgb(55,55,55)"},icon:"user circle",text:"My channel"}),r.a.createElement(k.a.Item,{onClick:function(){i.push("/subscriptions")},style:{color:"rgb(55,55,55)"},icon:"th list",text:"Subscriptions"}),r.a.createElement(k.a.Item,{onClick:function(){i.push("/likes")},style:{color:"rgb(55,55,55)"},icon:"like",text:"Likes"}),r.a.createElement(k.a.Item,{onClick:n,style:{color:"rgb(55,55,55)"},icon:"edit",text:"Edit profile"}),r.a.createElement(k.a.Item,{onClick:a,style:{color:"rgb(55,55,55)"},icon:"sign out",text:"Logout"}))))}}]),t}(n.Component),x=Object(b.a)(L),P=function(e){function t(){return Object(h.a)(this,t),Object(m.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this.props,t=e.isAuthenticated,a=e.username,n=e.name,i=e.avatar,s=e.logout,o=e.isLoading,c=e.showRegister,l=e.showLogin,u=e.showEditProfile;return t?r.a.createElement(x,{username:a,name:n,avatar:i,logout:s,showEditProfile:u,isLoading:o}):r.a.createElement(S,{showRegister:c,showLogin:l})}}]),t}(n.Component),A=(a(401),a(22)),F=a.n(A),R="https://pictureself.herokuapp.com/api/",N=R+"user/",T=N+"register/",D=N+"login/",U=N+"logout/",M=N+"avatar/"+"edit/",z=a(40),V=a(19),H={isLoading:!1,isAuthenticated:!1,username:null,name:null,avatar:null,token:null,error:null},W={isEditing:!1,editError:null,editSuccess:!1},G=Object(V.a)({},H,W),B=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:G,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN_REQUEST":return Object(V.a)({},e,{isLoading:!0,isAuthenticated:!1,error:null});case"LOGIN_SUCCESS":return Object(V.a)({},e,{isLoading:!1,isAuthenticated:!0,token:t.token,username:t.username,avatar:t.avatar,name:t.name,error:null});case"LOGIN_FAILURE":return Object(V.a)({},e,H,{error:t.error});case"EDIT_PROFILE_REQUEST":return Object(V.a)({},e,{isEditing:!0,editError:null,editSuccess:!1});case"EDIT_PROFILE_SUCCESS":return Object(V.a)({},e,{isEditing:!1,editError:null,editSuccess:!0,avatar:t.avatar||e.avatar,name:t.name||e.name});case"EDIT_PROFILE_FAILURE":return Object(V.a)({},e,W,{editError:t.error});case"EDIT_PROFILE_RESET":return Object(V.a)({},e,W);case"LOGIN_RESET":return Object(V.a)({},e,H);case"LOGOUT":return G;default:return e}},Q={modalType:null,modalProps:{}},q=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Q,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SHOW_MODAL":return{modalType:t.modalType,modalProps:t.modalProps};case"HIDE_MODAL":return{modalType:null,modalProps:{}};default:return e}},J={isLoading:!1,error:null},K=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:J,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"REGISTER_REQUEST":return Object(V.a)({},e,{isLoading:!0,error:null});case"REGISTER_SUCCESS":return{isLoading:!1,error:null};case"REGISTER_FAILURE":return{isLoading:!1,error:t.error};case"REGISTER_RESET":return J;default:return e}},X={isLoading:!1,profile:null,error:null},Y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:X,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_USER_PROFILE_REQUEST":return Object(V.a)({},e,{isLoading:!0,error:null});case"FETCH_USER_PROFILE_SUCCESS":return{isLoading:!1,profile:t.profile,error:null};case"FETCH_USER_PROFILE_FAILURE":return Object(V.a)({},X,{error:t.error});default:return e}},Z={isLoading:!1,users:null,error:null},$=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Z,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_USERS_REQUEST":return Object(V.a)({},e,{isLoading:!0,error:null});case"FETCH_USERS_SUCCESS":return{isLoading:!1,users:t.users,error:null};case"FETCH_USERS_FAILURE":return Object(V.a)({},Z,{error:t.error});default:return e}},ee=Object(z.c)({auth:B,modal:q,register:K,userProfile:Y,users:$}),te=a(264),ae=a(169),ne=a(265),re=a.n(ne),ie=a(266),se=a.n(ie),oe=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||z.d,ce={key:"root",storage:se.a,stateReconciler:re.a},le=Object(ae.a)(ce,ee),ue=Object(z.e)(le,oe(Object(z.a)(te.a))),de=Object(ae.b)(ue),he=ue,pe=function(){return he.getState().auth.isAuthenticated?{headers:{Authorization:"Token "+he.getState().auth.token}}:null},me=function(e){var t=new FormData;t.append("file",e);var a={headers:{Authorization:pe().headers.Authorization,"content-type":"multipart/form-data"}};return F.a.post(M,t,a)},fe=function(e,t){return{type:"SHOW_MODAL",modalType:e,modalProps:t}},ge=function(e){try{if(!e.response)return"Error: Network Error";if(e.response.data){var t=e.response.data;if(t.detail)return"Invalid token."===t.detail?"Invalid Token. Please re-login.":t.detail;if(t[0])return t[0];var a=Object.keys(t)[0],n=t[a][0];if(["non_field_errors","detail"].indexOf(a)>=0)return n;var r=String(a).replace("_"," ");return r.charAt(0).toUpperCase()+r.substring(1)+": "+n}}catch(e){return console.log(e),"Something wrong happened. Please report this."}},be=function(e,t){return function(a){a(ve()),function(e,t){return F.a.post(D,{username:e,password:t},pe())}(e,t).then(function(e){a(Ee(e.data)),a({type:"HIDE_MODAL"})}).catch(function(e){var t=ge(e);a(Oe(t))})}},ve=function(){return{type:"LOGIN_REQUEST"}},Ee=function(e){return{type:"LOGIN_SUCCESS",token:e.token,username:e.username,name:e.name,avatar:e.avatar}},Oe=function(e){return{type:"LOGIN_FAILURE",error:e}},_e=function(){return function(e){F.a.post(U,null,pe()),e({type:"LOGOUT"})}},ye=function(e){return function(t){t(je());var a=he.getState().auth.username;a?function(e,t){return F.a.put(N+e+"/edit/",t,pe())}(a,e).then(function(a){t(Se(e))}).catch(function(e){var a=ge(e);t(Ce(a))}):t(Ce("Not authenticated"))}},je=function(){return{type:"EDIT_PROFILE_REQUEST"}},Se=function(e){return{type:"EDIT_PROFILE_SUCCESS",avatar:e.avatar,name:e.name}},Ce=function(e){return{type:"EDIT_PROFILE_FAILURE",error:e}},we=function(e){return function(t){t(ke()),function(e){return F.a.post(T,e,pe())}(e).then(function(a){t(Ie()),t(be(e.username,e.password))}).catch(function(e){var a=ge(e);t(Le(a))})}},ke=function(){return{type:"REGISTER_REQUEST"}},Ie=function(){return{type:"REGISTER_SUCCESS"}},Le=function(e){return{type:"REGISTER_FAILURE",error:e}},xe=function(e){return function(t){t(Pe()),function(e){return F.a.get(N+e,pe())}(e).then(function(e){t(Ae(e.data))}).catch(function(e){var a=ge(e);t(Fe(a))})}},Pe=function(){return{type:"FETCH_USER_PROFILE_REQUEST"}},Ae=function(e){return{type:"FETCH_USER_PROFILE_SUCCESS",profile:e}},Fe=function(e){return{type:"FETCH_USER_PROFILE_FAILURE",error:e}},Re=function(){return function(e){e(Ne()),F.a.get(N+"channels/",pe()).then(function(t){e(Te(t.data))}).catch(function(t){var a=ge(t);e(De(a))})}},Ne=function(){return{type:"FETCH_USERS_REQUEST"}},Te=function(e){return{type:"FETCH_USERS_SUCCESS",users:e}},De=function(e){return{type:"FETCH_USERS_FAILURE",error:e}},Ue=a(267),Me=a.n(Ue),ze=(a(423),function(){return r.a.createElement("div",{className:"logoContainer"},r.a.createElement(v.a,{to:"/"},r.a.createElement("img",{id:"logo",src:Me.a,alt:"logo",title:"Pictureself Home"})))}),Ve=a(578),He=function(e){function t(e){var a;return Object(h.a)(this,t),(a=Object(m.a)(this,Object(f.a)(t).call(this,e))).handleSearchInputChange=function(e){a.setState({searchQuery:e.target.value})},a.handleSearchInputSubmit=function(){a.props.history.push("/search?q="+a.state.searchQuery)},a.handleSearchInputKeyPress=function(e){13==e.charCode&&a.props.history.push("/search?q="+a.state.searchQuery)},a.state={searchQuery:""},a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this.props,t=e.isAuthenticated,a=e.username,n=e.name,i=e.avatar,s=e.handleLogout,o=e.isLoading,c=e.showRegister,l=e.showLogin,u=e.showEditProfile;return r.a.createElement("div",{className:"headerContainerWrapperSticky"},r.a.createElement("div",{className:"headerContainer"},r.a.createElement("div",{id:"header-logo-search"},r.a.createElement(ze,null),r.a.createElement(Ve.a,{style:{height:"30px",width:"370px","margin-right":"15px"},icon:{name:"search",link:!0,onClick:this.handleSearchInputSubmit},placeholder:"Search...",value:this.state.searchQuery,onChange:this.handleSearchInputChange,onKeyPress:this.handleSearchInputKeyPress}),r.a.createElement(y,null)),r.a.createElement(P,{isAuthenticated:t,username:a,name:n,avatar:i,logout:s,isLoading:o,showRegister:c,showLogin:l,showEditProfile:u})))}}]),t}(n.Component),We=Object(o.b)(function(e){return{username:e.auth.username,name:e.auth.name,avatar:e.auth.avatar,isAuthenticated:e.auth.isAuthenticated,isLoading:e.auth.isLoading}},function(e){return{handleLogout:function(){e(_e())},showRegister:function(){e(fe("REGISTER",{}))},showLogin:function(){e(fe("LOGIN",{}))},showEditProfile:function(){e(fe("EDIT_PROFILE",{}))}}})(Object(b.a)(He)),Ge=a(41),Be=a(585),Qe=a(582),qe=(a(424),function(e){return r.a.createElement("div",{className:e.className||"loader"},r.a.createElement("div",{className:"loader-spinning-wheel"}))}),Je=(a(425),function(e){function t(){return Object(h.a)(this,t),Object(m.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this.props,t=e.loading,a=e.loadingClassName,n=e.loadingMessage,i=e.error,s=e.errorClassName,o=e.errorMessage,c=e.success,l=e.successClassName,u=e.successMessage,d=e.nothing,h=e.nothingClassName,p=e.nothingMessage,m=e.type;return t?"modal"===m?r.a.createElement("div",{className:a||"statusMessage-modal"},r.a.createElement(Be.a,{attached:!0,icon:!0},r.a.createElement(Be.a.Content,null,r.a.createElement(I.a,{name:"circle notched",loading:!0,size:"big"}),n||"Loading ..."))):r.a.createElement("div",{className:a||"statusMessage-default"},r.a.createElement(qe,null),r.a.createElement("br",null)):i?"modal"===m?r.a.createElement("div",{className:s||"statusMessage-modal"},r.a.createElement(Be.a,{attached:!0,error:!0,icon:!0},r.a.createElement(Be.a.Content,null,r.a.createElement(I.a,{name:"thumbs outline down",size:"big"}),o||i||"Sorry, something went wrong"))):r.a.createElement("div",{className:s||"statusMessage-default"},r.a.createElement(Be.a,{error:!0},r.a.createElement(Be.a.Content,null,r.a.createElement(I.a,{name:"thumbs outline down",size:"big"}),o||i||"Sorry, something went wrong"))):c?"modal"===m?r.a.createElement("div",{className:l||"statusMessage-modal"},r.a.createElement(Be.a,{attached:!0,positive:!0,icon:!0},r.a.createElement(Be.a.Content,null,r.a.createElement(I.a,{name:"thumbs outline up",size:"big"}),u||"Successful"))):r.a.createElement("div",{className:l||"statusMessage-default"},r.a.createElement(Be.a,{positive:!0},r.a.createElement(Be.a.Content,null,r.a.createElement(I.a,{name:"thumbs outline up",size:"big"}),u||"Successful"))):d?"modal"===m?r.a.createElement("div",{className:h||"statusMessage-modal"},r.a.createElement(Be.a,{attached:!0,error:!0,icon:!0},r.a.createElement(Be.a.Content,null,r.a.createElement(I.a,{name:"thumbs outline down",size:"big"}),p||"Successful"))):r.a.createElement("div",{className:h||"statusMessage-default"},r.a.createElement(Be.a,{error:!0},r.a.createElement(Be.a.Content,null,r.a.createElement(I.a,{name:"thumbs outline down",size:"big"}),p||"Nothing to display"))):null}}]),t}(n.Component)),Ke=(a(426),function(e){function t(e){var a;return Object(h.a)(this,t),(a=Object(m.a)(this,Object(f.a)(t).call(this,e))).handleChange=function(e,t){var n=t.name,r=t.value;a.setState(Object(Ge.a)({},n,r))},a.handleCheckbox=function(){a.setState({checked:!a.state.checked})},a.isFormValid=function(){var e=a.state,t=e.username,n=e.name,r=e.email,i=e.password,s=e.checked,o=!0;return t&&n&&r&&i&&s||(o=!1),o},a.handleSubmit=function(e){if(a.isFormValid()){var t={username:a.state.username,name:a.state.name,email:a.state.email,password:a.state.password};a.props.handleRegister(t)}},a.state={username:"",name:"",email:"",password:"",checked:!0},a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this.props,t=e.isLoading,a=e.error,n=e.showLogin,i=r.a.createElement(Je,{error:a,errorMessage:a||"Logging In Error",loading:t,loadingMessage:"Registering your account",type:"modal"});return r.a.createElement("div",null,r.a.createElement(Be.a,{attached:!0,header:"Sign Up",content:"Fill out the form below to sign up for a new account"}),i,r.a.createElement(Qe.a,{className:"attached fluid segment"},r.a.createElement(Qe.a.Input,{required:!0,label:"Username",placeholder:"Username",type:"text",name:"username",value:this.state.username,onChange:this.handleChange}),r.a.createElement(Qe.a.Input,{required:!0,label:"Name",placeholder:"Name",type:"text",name:"name",value:this.state.name,onChange:this.handleChange}),r.a.createElement(Qe.a.Input,{required:!0,label:"Email",placeholder:"Email",type:"email",name:"email",value:this.state.email,onChange:this.handleChange}),r.a.createElement(Qe.a.Input,{required:!0,label:"Password",type:"password",name:"password",value:this.state.password,onChange:this.handleChange}),r.a.createElement(Qe.a.Checkbox,{inline:!0,required:!0,label:"I agree to the terms and conditions",name:"agreement",checked:this.state.checked,onChange:this.handleCheckbox}),r.a.createElement(E.a,{color:"blue",loading:t,disabled:t,onClick:this.handleSubmit},"Submit")),r.a.createElement(Be.a,{attached:"bottom",warning:!0},r.a.createElement(I.a,{name:"help"}),"Already signed up?\xa0",r.a.createElement("a",{className:"register-login",onClick:n},"Log in here"),"\xa0instead."))}}]),t}(n.Component)),Xe=(a(427),function(e){function t(){var e,a;Object(h.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(m.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(r)))).listenKeyboard=function(e){"Escape"!==e.key&&27!==e.keyCode||a.props.onClose()},a.closeModal=function(){a.props.onClose()},a.onDialogClick=function(e){e.stopPropagation()},a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.props.onClose&&window.addEventListener("keydown",this.listenKeyboard,!0)}},{key:"componentWillUnmount",value:function(){this.props.onClose&&window.removeEventListener("keydown",this.listenKeyboard,!0)}},{key:"render",value:function(){var e=this.props.overlayStyle?this.props.overlayStyle:{},t=this.props.contentStyle?this.props.contentStyle:{},a=this.props.dialogStyle?this.props.dialogStyle:{};return r.a.createElement("div",null,r.a.createElement("div",{className:"modal-overlay-div",style:e}),r.a.createElement("div",{className:"modal-content-div",style:t,onClick:this.closeModal},r.a.createElement("div",{className:"modal-dialog-div",style:a,onClick:this.onDialogClick},r.a.createElement(I.a,{name:"window close outline",size:"large",className:"modal-close-div",onClick:this.closeModal}),this.props.children)))}}]),t}(n.Component)),Ye=function(e){function t(){return Object(h.a)(this,t),Object(m.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(p.a)(t,[{key:"componentWillMount",value:function(){this.props.isAuthenticated&&this.props.handleClose()}},{key:"render",value:function(){var e=this.props,t=e.isAuthenticated,a=e.isLoading,n=e.error,i=e.handleRegister,s=e.showLogin,o=e.handleClose;return t?null:r.a.createElement(Xe,{onClose:o},r.a.createElement(Ke,{handleRegister:i,showLogin:s,isLoading:a,error:n}))}}]),t}(n.Component),Ze=Object(o.b)(function(e){return{isAuthenticated:e.auth.isAuthenticated,error:e.register.error,isLoading:e.register.isLoading}},function(e){return{handleRegister:function(t){e(we(t))},handleClose:function(){e({type:"HIDE_MODAL"}),e({type:"REGISTER_RESET"})},showLogin:function(){e(fe("LOGIN",{})),e({type:"REGISTER_RESET"})}}})(Ye),$e=(a(428),function(e){function t(e){var a;return Object(h.a)(this,t),(a=Object(m.a)(this,Object(f.a)(t).call(this,e))).handleChange=function(e,t){var n=t.name,r=t.value;a.setState(Object(Ge.a)({},n,r))},a.isFormValid=function(){var e=a.state,t=e.username,n=e.password,r=!0;return t&&n||(r=!1),r},a.handleSubmit=function(e){a.isFormValid()&&a.props.handleLogin(a.state.username,a.state.password)},a.state={username:"",password:""},a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this.props,t=e.isLoading,a=e.error,n=e.showRegister,i=r.a.createElement(Je,{error:a,errorMessage:a||"Logging In Error",loading:t,loadingMessage:"Logging in",type:"modal"});return r.a.createElement("div",null,r.a.createElement(Be.a,{attached:!0,header:"Log In"}),i,r.a.createElement(Qe.a,{className:"attached fluid segment"},r.a.createElement(Qe.a.Input,{required:!0,label:"Username",placeholder:"Username",type:"text",name:"username",value:this.state.username,onChange:this.handleChange}),r.a.createElement(Qe.a.Input,{required:!0,label:"Password",type:"password",name:"password",value:this.state.password,onChange:this.handleChange}),r.a.createElement(E.a,{color:"blue",loading:t,disabled:t,onClick:this.handleSubmit},"Login")),r.a.createElement(Be.a,{attached:"bottom",warning:!0},r.a.createElement(I.a,{name:"help"}),"New to this site?\xa0",r.a.createElement("a",{className:"login-register",onClick:n},"Sign up here"),"\xa0instead."))}}]),t}(n.Component)),et=function(e){function t(){return Object(h.a)(this,t),Object(m.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(p.a)(t,[{key:"componentWillMount",value:function(){this.props.isAuthenticated&&this.props.handleClose()}},{key:"render",value:function(){var e=this.props,t=e.isAuthenticated,a=e.isLoading,n=e.error,i=e.handleClose,s=e.showRegister,o=e.handleLogin;return t?null:r.a.createElement(Xe,{onClose:i},r.a.createElement($e,{handleLogin:o,showRegister:s,isLoading:a,error:n}))}}]),t}(n.Component),tt=Object(o.b)(function(e){return{isLoading:e.auth.isLoading,error:e.auth.error,isAuthenticated:e.auth.isAuthenticated}},function(e){return{handleLogin:function(t,a){e(be(t,a))},handleClose:function(){e({type:"HIDE_MODAL"}),e({type:"LOGIN_RESET"})},showRegister:function(){e(fe("REGISTER",{})),e({type:"LOGIN_RESET"})}}})(et),at=a(279),nt=a(588),rt=a(580),it=(a(429),function(e){function t(e){var a;Object(h.a)(this,t),(a=Object(m.a)(this,Object(f.a)(t).call(this,e))).handleChange=function(e,t){var n=t.name,r=t.value;a.setState(Object(Ge.a)({},n,r))},a.onImageDrop=function(e){a.setState({avatarFile:e[0]})},a.editProfile=function(){var e={name:a.state.name,current_password:a.state.currentPassword,new_password:a.state.newPassword,about:a.state.about};a.props.handleEdit(e),a.setState({currentPassword:""})},a.handleSubmit=function(){var e=a.state,t=e.currentPassword,n=e.avatarFile;""!==t&&(n?(a.setState({avatarUploading:!0}),me(n).then(function(e){a.setState({avatar:e.data.avatar_url,avatarUploading:!1}),a.editProfile()}).catch(function(e){console.log(e),a.setState({avatarError:"Image Upload Error",avatarFile:null,avatarUploading:!1})})):a.editProfile())};var n=a.props,r=n.name,i=n.avatar;return a.state={name:r,newPassword:"",currentPassword:"",about:"",avatar:i,avatarFile:null,avatarError:null,avatarUploading:!1},a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this.props,t=e.isLoading,a=e.error,n=e.success,i=this.state,s=i.name,o=i.newPassword,c=i.currentPassword,l=i.about,u=i.avatar,d=i.avatarFile,h=i.avatarError,p=i.avatarUploading,m=r.a.createElement(Je,{error:a||h,errorMessage:a||h,loading:t||p,loadingMessage:"Editing your profile",success:n,successMessage:"Your profile edit was successful",type:"modal"}),f=d?d.preview:u;return r.a.createElement("div",null,r.a.createElement(Be.a,{attached:!0,header:"Edit Your Profile",content:"Fill out any part of the form below to edit your profile"}),m,r.a.createElement(Qe.a,{className:"attached segment"},r.a.createElement(nt.a,{celled:!0,columns:2},r.a.createElement(nt.a.Column,null,r.a.createElement(Qe.a.Field,null,r.a.createElement("label",null,"Profile picture"),r.a.createElement(at.a,{onDrop:this.onImageDrop,multiple:!1,accept:"image/*"},r.a.createElement(C.a,{src:f,className:"editProfile-avatar"}))),r.a.createElement(Qe.a.Input,{label:"About",placeholder:"Info",type:"text",name:"about",control:rt.a,value:l,onChange:this.handleChange})),r.a.createElement(nt.a.Column,null,r.a.createElement(Qe.a.Input,{label:"Name",placeholder:"Name",type:"text",name:"name",value:s,onChange:this.handleChange}),r.a.createElement(Qe.a.Input,{required:!0,label:"Current Password",type:"password",name:"currentPassword",value:c,onChange:this.handleChange}),r.a.createElement(Qe.a.Input,{label:"New Password",type:"password",name:"newPassword",value:o,onChange:this.handleChange}))),r.a.createElement(E.a,{color:"blue",loading:t,disabled:t,onClick:this.handleSubmit},"Submit")))}}]),t}(n.Component)),st=function(e){function t(){return Object(h.a)(this,t),Object(m.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(p.a)(t,[{key:"componentWillMount",value:function(){this.props.isAuthenticated||this.props.handleClose()}},{key:"render",value:function(){var e=this.props,t=e.isAuthenticated,a=e.isEditing,n=e.error,i=e.avatar,s=e.name,o=e.editProfile,c=e.handleClose,l=e.success;return t?r.a.createElement(Xe,{onClose:c,dialogStyle:{minWidth:"500px"}},r.a.createElement(it,{avatar:i,name:s,handleEdit:o,isLoading:a,error:n,success:l})):null}}]),t}(n.Component),ot=Object(o.b)(function(e){return{isAuthenticated:e.auth.isAuthenticated,isEditing:e.auth.isEditing,error:e.auth.editError,avatar:e.auth.avatar,name:e.auth.name,success:e.auth.editSuccess}},function(e){return{editProfile:function(t){e(ye(t))},handleClose:function(){e({type:"HIDE_MODAL"}),e({type:"EDIT_PROFILE_RESET"})}}})(st),ct=Object(o.b)(function(e){return{modalType:e.modal.modalType,modalProps:e.modal.modalProps}})(function(e){switch(e.modalType){case"REGISTER":return r.a.createElement(Ze,null);case"LOGIN":return r.a.createElement(tt,null);case"EDIT_PROFILE":return r.a.createElement(ot,null);default:return null}}),lt=a(20),ut=a(586),dt=function(e){function t(){return Object(h.a)(this,t),Object(m.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(p.a)(t,[{key:"componentWillMount",value:function(){this.props.isAuthenticated&&this.props.handleClose()}},{key:"render",value:function(){var e=this.props,t=e.isAuthenticated,a=e.isLoading,n=e.error,i=e.handleRegister,s=e.showLogInPage,o=e.from;return t?r.a.createElement(ut.a,{to:o}):r.a.createElement(Ke,{handleRegister:i,showLogin:s,isLoading:a,error:n})}}]),t}(n.Component),ht=Object(o.b)(function(e){return{isAuthenticated:e.auth.isAuthenticated,error:e.register.error,isLoading:e.register.isLoading}},function(e){return{handleRegister:function(t){e(we(t))}}})(dt),pt=function(e){function t(){return Object(h.a)(this,t),Object(m.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this.props,t=e.isAuthenticated,a=e.isLoading,n=e.error,i=e.showRegisterPage,s=e.handleLogin,o=e.from;return t?r.a.createElement(ut.a,{to:o}):r.a.createElement($e,{handleLogin:s,showRegister:i,isLoading:a,error:n})}}]),t}(n.Component),mt=Object(o.b)(function(e){return{isLoading:e.auth.isLoading,error:e.auth.error,isAuthenticated:e.auth.isAuthenticated}},function(e){return{handleLogin:function(t,a){e(be(t,a))}}})(pt),ft=function(e){function t(e){var a;return Object(h.a)(this,t),(a=Object(m.a)(this,Object(f.a)(t).call(this,e))).showLogInPage=function(){a.setState({userIsRegistered:!0})},a.showRegisterPage=function(){a.setState({userIsRegistered:!1})},a.showLogInPage=a.showLogInPage.bind(Object(lt.a)(Object(lt.a)(a))),a.showRegisterPage=a.showRegisterPage.bind(Object(lt.a)(Object(lt.a)(a))),a.state={userIsRegistered:!0},a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=(this.props.location.state||{from:{pathname:"/"}}).from;return this.state.userIsRegistered?r.a.createElement(mt,{showRegisterPage:this.showRegisterPage,from:e}):r.a.createElement(ht,{showLogInPage:this.showLogInPage,from:e})}}]),t}(n.Component),gt=(a(430),a(431),a(127)),bt=a.n(gt),vt=function(e){function t(){return Object(h.a)(this,t),Object(m.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e,t=this,a={},n=this.props.pictureselfs;for(e=0;e<n.length;e++){var i=n[e];a[i.id]=i.width_height[0]>this.props.columnWidth?n[e].width_height[1]*(this.props.columnWidth/i.width_height[0]):n[e].width_height[1]+(this.props.columnWidth-i.width_height[0])}var s=n.map(function(e,n){return r.a.createElement("div",{key:e.id.toString()},r.a.createElement(v.a,{to:"/p/".concat(e.id.toString(),"/")},r.a.createElement("div",{style:{width:t.props.columnWidth.toString()+"px","box-shadow":"0px "+a[e.id].toString()+"px inset rgba(175,175,175,0.075)"}},r.a.createElement("img",{src:"data:image/".concat(e.ext,";base64,").concat(e.encoding),alt:e.title,style:{"max-width":"100%",height:"auto",margin:t.props.columnWidth>e.width_height[0]?(t.props.columnWidth-e.width_height[0])/2:"0px","z-index":"-1",position:"relative"}}))),r.a.createElement(v.a,{to:"/p/".concat(e.id.toString(),"/")},r.a.createElement("p",{title:e.title,class:"gallery title",style:{width:t.props.columnWidth-10+"px","margin-left":"5px"}},e.title)),t.props.channel?null:r.a.createElement(v.a,{to:"/".concat(e.username,"/")},r.a.createElement("p",{title:e.name,class:"gallery channel",style:{width:t.props.columnWidth-10+"px","margin-left":"5px"}},e.name)))});return r.a.createElement("div",null,r.a.createElement("br",null),r.a.createElement(bt.a,{monitorImagesLoaded:!0,columnWidth:this.props.columnWidth,gutterWidth:this.props.gutterWidth,gutterHeight:this.props.gutterHeight+5,duration:0},s))}}]),t}(n.Component),Et=a(128),Ot=a.n(Et),_t=function(e){function t(e){var a;return Object(h.a)(this,t),(a=Object(m.a)(this,Object(f.a)(t).call(this,e))).fetchPictureselfsUserApi=function(e){return F.a.get(R+"user/"+e+"/pictureselfs/",pe())},a.fetchPictureselfsUser=function(){a.fetchPictureselfsUserApi(a.props.username).then(function(e){a.setState({pictureselfs:e.data})}).catch(function(e){var t=ge(e);alert(e),alert(t)})},a.toggleSubscribeApi=function(e){return F.a.get(R+"user/"+e+"/toggle-subscription/",pe())},a.toggleSubscribe=function(){if(he.getState().auth.isAuthenticated)a.setState({numberOfSubscribers:a.state.isSubscribed?a.state.numberOfSubscribers-1:a.state.numberOfSubscribers+1}),a.setState({isSubscribed:!a.state.isSubscribed}),a.toggleSubscribeApi(a.props.username);else{var e=a.props.location;e.pathname="/"+a.props.match.params.username+"/subscribe",a.props.history.push({pathname:"/login",state:{from:e}})}},a.redirectToCustomize=function(){a.props.history.push({pathname:"/"+a.props.match.params.username+"/customize/"})},a.state={pictureselfs:[],isSubscribed:a.props.isSubscribed,numberOfSubscribers:a.props.numberOfSubscribers},a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.fetchPictureselfsUser(),this.props.location.pathname=="/"+this.props.match.params.username+"/subscribe"&&(this.props.location.pathname="/"+this.props.match.params.username,this.toggleSubscribe())}},{key:"render",value:function(){var e=this.props,t=e.name,a=e.username,n=e.about,i=e.isCustomizable,s=he.getState().auth.username==a?null:r.a.createElement(E.a,{basic:!0,onClick:this.toggleSubscribe,content:this.state.isSubscribed?"SUBSCRIBED"+(0==this.state.numberOfSubscribers?"":"   "+this.state.numberOfSubscribers):"SUBSCRIBE"+(0==this.state.numberOfSubscribers?"":"   "+this.state.numberOfSubscribers),size:"small",compact:!0,style:{color:"rgb(155,155,155)","margin-bottom":"10px","font-weight":"bold"}}),o=""==this.props.avatar?"https://afcm.ca/wp-content/uploads/2018/06/no-photo.png":this.props.avatar,c=i?r.a.createElement(E.a,{basic:!0,size:"small",compact:!0,style:{backgroundColor:"transparent","font-weight":"bold","margin-bottom":"10px"},onClick:this.redirectToCustomize},"CUSTOMIZE"):null;return r.a.createElement("div",null,r.a.createElement("div",{className:"profileContainer"},r.a.createElement("div",null,r.a.createElement(w,{className:"profileAvatar",avatar:o,centered:!1})),r.a.createElement("div",{className:"profileInfo",style:{"white-space":"pre"}},r.a.createElement("div",{className:"name"},t),s,c,r.a.createElement("div",{className:"about"},r.a.createElement(Ot.a,{tagName:"p"},n)))),r.a.createElement("br",null),r.a.createElement(vt,{columnWidth:200,gutterWidth:10,gutterHeight:20,pictureselfs:this.state.pictureselfs,channel:!0,duration:0}))}}]),t}(n.Component),yt=(a(501),function(e){function t(){return Object(h.a)(this,t),Object(m.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.match.params.username;this.props.fetchUserProfile(e)}},{key:"componentWillReceiveProps",value:function(e){var t=this.props.match.params.username,a=e.match.params.username;t!==a&&this.props.fetchUserProfile(a)}},{key:"render",value:function(){var e=this.props,t=e.isLoading,a=e.error,n=e.profile,i=e.location,s=e.match,o=e.history;if(a||!n||t)return r.a.createElement(Je,{error:a||!n,errorClassName:"userProfile-error",errorMessage:a,loading:t,loadingMessage:"",type:"default"});var c=n.name,l=n.username,u=n.about,d=n.avatar,h=n.date_joined,p=n.is_subscribed,m=n.number_of_subscribers,f=n.is_customizable;return r.a.createElement(_t,{username:l,name:c,avatar:d,about:u,dateJoined:h,isSubscribed:p,numberOfSubscribers:m,isCustomizable:f,location:i,match:s,history:o})}}]),t}(n.Component)),jt=Object(o.b)(function(e){return{isLoading:e.userProfile.isLoading,profile:e.userProfile.profile,error:e.userProfile.error}},function(e){return{fetchUserProfile:function(t){e(xe(t))}}})(yt),St=(a(502),function(e){function t(){return Object(h.a)(this,t),Object(m.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this.props,t=e.name,a=e.username,n=e.avatar;return r.a.createElement("div",{className:"user-card"},r.a.createElement(v.a,{to:"/".concat(a)},r.a.createElement("img",{src:n,className:"user-card-avatar",alt:a})),r.a.createElement(v.a,{to:"/".concat(a)},r.a.createElement("p",{className:"user-card-name"},t)),r.a.createElement(v.a,{to:"/".concat(a)},r.a.createElement("p",{className:"user-card-username"},"@",a)))}}]),t}(n.Component)),Ct=(a(503),function(e){function t(){return Object(h.a)(this,t),Object(m.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this.props,t=e.isLoading,a=e.error,n=e.users;if(a||!n||t||0===n.length)return r.a.createElement(Je,{error:a||!n,errorClassName:"users-error",errorMessage:a,loading:t,loadingMessage:"We are fetching the users for you",nothing:n&&0===n.length,nothingMessage:"No user to display",nothingClassName:"users-error",type:"default"});var i=n.map(function(e){var t=e.name,a=e.username,n=e.avatar;return r.a.createElement("div",{key:a,className:"userCard"},r.a.createElement(St,{username:a,name:t,avatar:n}))});return r.a.createElement("div",{className:"usersContainer"},i)}}]),t}(n.Component)),wt=function(e){function t(){return Object(h.a)(this,t),Object(m.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.props.fetchUsers()}},{key:"render",value:function(){return r.a.createElement(Ct,this.props)}}]),t}(n.Component),kt=Object(o.b)(function(e){return{isLoading:e.users.isLoading,users:e.users.users,error:e.users.error}},function(e){return{fetchUsers:function(){e(Re())}}})(wt),It=(a(504),function(e){function t(){return Object(h.a)(this,t),Object(m.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("div",{className:"not-found-page"},r.a.createElement("p",null,"This page isn't available.")))}}]),t}(n.Component)),Lt=a(70),xt=a(97),Pt=a(579),At=a(583),Ft=a(587),Rt=(a(505),function(e){function t(e){var a;return Object(h.a)(this,t),(a=Object(m.a)(this,Object(f.a)(t).call(this,e))).hoverOn=function(){a.setState({hover:!0})},a.hoverOff=function(){a.setState({hover:!1})},a.hoverOn=a.hoverOn.bind(Object(lt.a)(Object(lt.a)(a))),a.hoverOff=a.hoverOff.bind(Object(lt.a)(Object(lt.a)(a))),a.state={hover:!1},a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e,t=this;return this.props.insert&&(e=r.a.createElement(r.a.Fragment,null,r.a.createElement(E.a,{as:"label",style:{backgroundColor:"transparent","margin-left":0,"margin-right":"35px"},icon:"add",size:"large",htmlFor:"hiddenFileInputf"+this.props.feature_index.toString()+"j"+this.props.variant_index.toString()}),r.a.createElement("input",{hidden:!0,id:"hiddenFileInputf"+this.props.feature_index.toString()+"j"+this.props.variant_index.toString(),type:"file",onChange:function(e){return t.props.insertVariant(t.props.feature_index,t.props.variant_index,e.target.files)}}))),r.a.createElement(r.a.Fragment,null,e,r.a.createElement("div",{class:"variant-container",onMouseEnter:this.hoverOn,onMouseLeave:this.hoverOff},r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement(E.a,{style:{backgroundColor:"transparent",margin:0,visibility:"hidden"},icon:"file image"})),r.a.createElement("div",null,r.a.createElement("img",{src:this.props.variant_url,alt:this.props.variant_name,style:{margin:0}})),r.a.createElement("div",null,r.a.createElement(E.a,{style:{backgroundColor:"transparent",margin:0,visibility:"hidden"},icon:"delete"}))),r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement(E.a,{style:{backgroundColor:"transparent",margin:0,visibility:this.state.hover?"visible":"hidden"},icon:"delete",onClick:function(){return t.props.removeVariant(t.props.feature_index,t.props.variant_index,t.props.variant_id)}})),r.a.createElement("div",null,r.a.createElement(E.a,{as:"label",style:{backgroundColor:"transparent",margin:0,visibility:this.state.hover?"visible":"hidden"},icon:"file image",htmlFor:"hiddenFileInputf"+this.props.feature_index.toString()+"v"+this.props.variant_index.toString()}),r.a.createElement("input",{hidden:!0,id:"hiddenFileInputf"+this.props.feature_index.toString()+"v"+this.props.variant_index.toString(),type:"file",onChange:function(e){return t.props.updateVariant(t.props.variant_id,e.target.files)}}))),r.a.createElement("div",null)))}}]),t}(n.Component)),Nt=function(e){function t(e){var a;return Object(h.a)(this,t),(a=Object(m.a)(this,Object(f.a)(t).call(this,e))).showImportFeatureDropdown=function(){return a.setState(function(e){return{importFeature:!e.importFeature}})},a.hoverOn=function(){a.setState({hover:!0})},a.hoverOff=function(){a.setState({hover:!1})},a.handleDismiss=function(){a.setState({importedFeatureMessage:!1})},a.handleFeatureImportDropdownChange=function(e,t){a.setState({feature_to_include:t.value,includeFeature:"create_new"!==t.value})},a.handleChange=function(e,t){t.name;var n=t.value;a.props.imported?(a.setState({importedFeatureMessage:!0}),setTimeout(function(){a.setState({importedFeatureMessage:!1})},9e3)):a.props.updateFeature(a.props.feature_id,n)},a.importVariantsCheckboxHandleChange=function(){return a.setState(function(e){return{importVariantsIsChecked:!e.importVariantsIsChecked}})},a.showInsertPositions=function(){return a.setState(function(e){return{insertChecked:!e.insertChecked}})},a.hoverOn=a.hoverOn.bind(Object(lt.a)(Object(lt.a)(a))),a.hoverOff=a.hoverOff.bind(Object(lt.a)(Object(lt.a)(a))),a.importVariantsCheckboxHandleChange=a.importVariantsCheckboxHandleChange.bind(Object(lt.a)(Object(lt.a)(a))),a.handleFeatureImportDropdownChange=a.handleFeatureImportDropdownChange.bind(Object(lt.a)(Object(lt.a)(a))),a.handleInsertButtonClick=a.handleInsertButtonClick.bind(Object(lt.a)(Object(lt.a)(a))),a.state={insertChecked:!1,hover:!1,feature_to_include:"create_new",importedFeatureMessage:!1,importVariantsIsChecked:!1},a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"handleInsertButtonClick",value:function(){this.props.insertFeature(this.props.feature_index,this.state.feature_to_include,this.state.importVariantsIsChecked),this.setState({feature_to_include:"create_new",includeFeature:!1})}},{key:"render",value:function(){var e,t=this,a=[],n={key:"create_new",text:"(create new)",value:"create_new"};a.push(n);for(var i=0,s=Object.entries(this.props.features_to_include);i<s.length;i++){var o=s[i],c=Object(xt.a)(o,2),l=c[0],u=c[1],d={};d.key=l,d.text=u,d.value=l,a.push(d)}var h,p=this.state.feature_to_include;this.props.insert&&(e=r.a.createElement(r.a.Fragment,null,r.a.createElement(E.a,{basic:!0,content:"Add feature",onClick:function(){return t.handleInsertButtonClick()},style:{"margin-bottom":"20px"}}),r.a.createElement(k.a,{onChange:function(e,a){return t.handleFeatureImportDropdownChange(e,a)},options:a,placeholder:"Choose feature to import",defaultValue:"create_new",selection:!0,value:p,style:{visibility:0===Object.keys(this.props.features_to_include).length?"hidden":"visible"}}),r.a.createElement(Pt.a,{label:"Import variants",style:{"margin-left":"5px",visibility:"create_new"===this.state.feature_to_include?"hidden":"visible"},checked:this.state.importVariantsIsChecked,onChange:this.importVariantsCheckboxHandleChange}))),this.props.variant_order.length&&(h=r.a.createElement("div",null,r.a.createElement(Pt.a,{slider:!0,label:"Insert variant",style:{"margin-bottom":"0px"},checked:this.state.insertChecked,onChange:this.showInsertPositions}),r.a.createElement("br",null),r.a.createElement("br",null)));var m,f,g=this.props.variant_order.map(function(e,a){return r.a.createElement(Rt,{key:e,variant_index:a,feature_index:t.props.feature_index,insert:t.state.insertChecked,updateVariant:t.props.updateVariant,insertVariant:t.props.insertVariant,removeVariant:t.props.removeVariant,variant_name:t.props.variant_names[e],variant_id:e,variant_url:t.props.variant_urls[e],variant_file:t.props.variant_files[e],hover:t.state.hover})});return this.state.importedFeatureMessage&&(m=r.a.createElement(r.a.Fragment,null,r.a.createElement(Be.a,{compact:!0,onDismiss:this.handleDismiss,header:"The feature is included!",content:"Title of included feature can only be formatted in the edit menu of pictureself it's originated from."}),r.a.createElement("br",null)," ",r.a.createElement("br",null))),f=this.props.variantsAreImported?r.a.createElement(Pt.a,{label:"Import variants",style:{"margin-bottom":"20px"},checked:!0,disabled:!0}):r.a.createElement(r.a.Fragment,null," ",h,r.a.createElement("div",{id:"main"},g," ",r.a.createElement(O.a,{position:"bottom center",mouseEnterDelay:750,trigger:r.a.createElement("div",{class:0===this.props.variant_order.length?"initialAddButtonDiv":""},r.a.createElement(E.a,{as:"label",style:{backgroundColor:"transparent",margin:0},icon:"add",size:"large",htmlFor:"hiddenFileInput"+this.props.feature_index.toString()}),r.a.createElement("input",{hidden:!0,id:"hiddenFileInput"+this.props.feature_index.toString(),type:"file",accept:"image/*",multiple:!0,onChange:function(e){return t.props.addVariants(t.props.feature_index,e.target.files)},onClick:function(e){e.target.value=null}})),content:"Add variant",size:"large",style:{borderRadius:3,opacity:.8,"padding-top":"0.25em","padding-bottom":"0.25em","padding-left":"0.5em","padding-right":"0.5em"},inverted:!0,basic:!0}))),r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement("br",null),r.a.createElement(Qe.a,{onMouseEnter:this.hoverOn,onMouseLeave:this.hoverOff},r.a.createElement(Qe.a.Group,null,r.a.createElement(Qe.a.Input,{width:"11",size:"large",type:"text",name:"title",value:this.props.title,placeholder:"Feature Title",onChange:this.handleChange}),r.a.createElement(Qe.a.Button,{class:"btn",style:{backgroundColor:"transparent",visibility:this.state.hover?"visible":"hidden"},icon:"delete",size:"huge",onClick:function(){return t.props.remove_feature(t.props.feature_index,t.props.feature_id)}}))),m,f),e)}}]),t}(n.Component),Tt=function(e){function t(e){var a;return Object(h.a)(this,t),(a=Object(m.a)(this,Object(f.a)(t).call(this,e))).fetchPictureselfApi=function(e){return F.a.get(R+"p/"+e+"/data/",pe())},a.fetchFeaturesToIncludeApi=function(e){return F.a.get(R+"p/"+e+"/features-to-include/",pe())},a.createPictureselfApi=function(e){for(var t=new FormData,a=0,n=Object.entries(e);a<n.length;a++){var r=n[a],i=Object(xt.a)(r,2),s=i[0],o=i[1];t.append(s,o)}var c={headers:{Authorization:pe().headers.Authorization,"content-type":"multipart/form-data"}};return F.a.post(R+"p/create/",t,c)},a.deletePictureselfApi=function(e){return F.a.delete(R+"p/"+e+"/delete/",pe())},a.editPictureselfApi=function(e,t){for(var n=new FormData,r=0,i=Object.entries(t);r<i.length;r++){var s=i[r],o=Object(xt.a)(s,2),c=o[0],l=o[1];n.append(c,l)}var u={headers:{Authorization:pe().headers.Authorization,"content-type":"multipart/form-data"}};return"0"===a.state.pictureself_id?F.a.post(R+"p/"+e+"/edit/",n,u):F.a.put(R+"p/"+e+"/edit/",n,u)},a.fetchPictureself=function(){var e=a.state.pictureself_id;a.fetchPictureselfApi(e).then(function(e){for(var t=e.data.variants,n=t.length,r={},i={},s=0;s<n;s++)r[t[s].id.toString()]=t[s].image,i[t[s].id.toString()]=t[s].original_name;for(var o=JSON.parse(e.data.feature_ids_json),c=JSON.parse(e.data.variant_ids_json),l=[],u=[],d=o.length,h=c.length,p=0;p<d;p++)l.push(o[p].toString());for(var m=0;m<h;m++){u.push([]);for(var f=c[m],g=f.length,b=0;b<g;b++)u[m].push(f[b].toString())}for(var v={},E=e.data.features,O=E.length,_=0;_<O;_++)v[E[_].id.toString()]=E[_].title;a.setState({pictureself_title:e.data.title,initial_pictureself_title:e.data.title,pictureself_description:e.data.description,channel_username:e.data.username,feature_order:l,variant_order:u,features:v,variant_urls:r,variant_names:i})}).catch(function(e){var t=ge(e);alert(e),alert(t)})},a.getNewPictureself=function(){for(var e=Object.keys(a.state.variant_files),t=a.state.feature_order.slice(),n=t.length,r=0;r<n;r++)t[r].indexOf("i")>-1&&(t[r]=t[r].substring(0,t[r].indexOf("i")));var i={title:a.state.pictureself_title,description:a.state.pictureself_description,feature_order:JSON.stringify(t),variant_order:JSON.stringify(a.state.variant_order),features:JSON.stringify(a.state.features),edited_created_variant_ids:JSON.stringify(e)};return Object.assign(i,a.state.variant_files)},a.showImportFeatureDropdown=function(){return a.setState(function(e){return{importFeature:!e.importFeature}})},a.importVariantsCheckboxHandleChange=function(){return a.setState(function(e){return{importVariantsIsChecked:!e.importVariantsIsChecked}})},a.showInsertPositions=function(){return a.setState(function(e){return{insertChecked:!e.insertChecked}})},a.handlePictureselfTitleChange=function(e){a.setState({pictureself_title:e.target.value})},a.handlePictureselfDescriptionChange=function(e){a.setState({pictureself_description:e.target.value})},a.updateFeature=function(e,t){var n=Object(V.a)({},a.state.features),r=Object(V.a)({},n[e]);r=t,n[e]=r,a.setState({features:n})},a.insertFeature=function(e,t,n){if("create_new"===t){var r=Object(V.a)({},a.state.features),i="f"+a.state.nfc.toString(),s={new_id:""};r[i]="",a.setState({features:Object(V.a)({},r,s)});var o=a.state.nfc+1;a.setState({nfc:o});var c=a.state.feature_order.slice();c.splice(e,0,i),a.setState({feature_order:c});var l=a.state.variant_order.slice();l.splice(e,0,[]),a.setState({variant_order:l})}else{var u=t+"i"+a.state.nfc.toString();if(e===a.state.feature_order.length)a.setState({feature_order:[].concat(Object(Lt.a)(a.state.feature_order),[u])}),a.setState({variant_order:[].concat(Object(Lt.a)(a.state.variant_order),[[]])});else{var d=a.state.feature_order.slice();d.splice(e,0,u),a.setState({feature_order:d});var h=a.state.variant_order.slice();h.splice(e,0,[]),a.setState({variant_order:h})}n&&a.setState({features_with_imported_variants:[].concat(Object(Lt.a)(a.state.features_with_imported_variants),[u])});var p=a.state.nfc+1;a.setState({nfc:p}),a.setState({feature_to_include:"create_new",includeFeature:!1})}},a.removeFeature=function(e,t){var n=Object(V.a)({},a.state.features);delete n[t],a.setState({features:Object(V.a)({},n)});var r=a.state.feature_order.slice();r.splice(e,1),a.setState({feature_order:r});var i=a.state.variant_order.slice();i.splice(e,1),a.setState({variant_order:i})},a.addFeature=function(){var e=Object(V.a)({},a.state.features),t="f"+a.state.nfc.toString(),n={new_id:""};e[t]="",a.setState({features:Object(V.a)({},e,n)});var r=a.state.nfc+1;a.setState({nfc:r}),a.setState({feature_order:[].concat(Object(Lt.a)(a.state.feature_order),[t])}),a.setState({variant_order:[].concat(Object(Lt.a)(a.state.variant_order),[[]])})},a.updateVariant=function(e,t){var n=t[0],r=Object(V.a)({},a.state.variant_urls),i=Object(V.a)({},r[e]);i=window.URL.createObjectURL(n),r[e]=i,a.setState({variant_urls:r});var s=Object(V.a)({},a.state.variant_names),o=Object(V.a)({},s[e]);o=n.name,s[e]=o,a.setState({variant_names:s});var c=Object(V.a)({},a.state.variant_files),l=Object(V.a)({},c[e]);l=n,c[e]=l,a.setState({variant_files:c})},a.insertVariant=function(e,t,n){var r="v"+a.state.nvc.toString(),i=n[0],s=window.URL.createObjectURL(i),o=i.name;a.setState({variant_files:Object(V.a)({},a.state.variant_files,Object(Ge.a)({},r,i))}),a.setState({variant_names:Object(V.a)({},a.state.variant_names,Object(Ge.a)({},r,o))}),a.setState({variant_urls:Object(V.a)({},a.state.variant_urls,Object(Ge.a)({},r,s))});var c=a.state.nvc+1;a.setState({nvc:c});var l=a.state.variant_order.slice();l[e].splice(t,0,r),a.setState({variant_order:l})},a.removeVariant=function(e,t,n){var r=Object(V.a)({},a.state.variant_files),i=Object(V.a)({},a.state.variant_names),s=Object(V.a)({},a.state.variant_urls);delete r[n],delete i[n],delete s[n],a.setState({variant_files:Object(V.a)({},r)}),a.setState({variant_names:Object(V.a)({},i)}),a.setState({variant_urls:Object(V.a)({},s)});var o=a.state.variant_order.slice();o[e].splice(t,1),a.setState({variant_order:o})},a.addVariants=function(e,t){for(var n=t.size,r=[],i={},s={},o={},c="",l=0;l<n;++l)c="v"+(a.state.nvc.toString()+l),r.push(c),s[c]=t[l],i[c]=t[l].name,o[c]=window.URL.createObjectURL(t[l]);a.setState({variant_files:Object(V.a)({},a.state.variant_files,s)}),a.setState({variant_names:Object(V.a)({},a.state.variant_names,i)});var u=a.state.nvc+n;a.setState({nvc:u});var d=a.state.variant_order.slice();d[e]=[].concat(Object(Lt.a)(d[e]),r),a.setState({variant_order:d}),a.setState({variant_urls:Object(V.a)({},a.state.variant_urls,o)})},a.atLeastOneVariant=function(){var e=a.state.variant_order;if(0==e.length)return!1;for(var t=0;t<e.length;t++)if(e[t].length>0)return!0},a.createPictureself=function(){if(a.atLeastOneVariant()){var e=a.getNewPictureself();a.createPictureselfApi(e).then(function(e){alert(e.data.new_pictureself_id),a.props.history.push("/p/"+e.data.new_pictureself_id)}).catch(function(e){a.setState({errorOnPost:"An Error Occured, Please Try Again"}),setTimeout(function(){a.setState({errorOnPost:""})},9e3)})}else a.setState({errorOnPost:"At Least 1 Variant Should Be Provided"}),setTimeout(function(){a.setState({errorOnPost:""})},9e3)},a.editPictureself=function(){if(a.atLeastOneVariant()){var e=a.getNewPictureself(),t=a.state.pictureself_id;a.editPictureselfApi(t,e).then(function(e){var t="0"==a.state.pictureself_id?e.data.new_pictureself_id:a.state.pictureself_id;a.props.history.push("/p/"+t)}).catch(function(e){a.setState({errorOnPost:"An Error Occured, Please Try Again"}),setTimeout(function(){a.setState({errorOnPost:""})},9e3)})}else a.setState({errorOnPost:"At Least 1 Variant Should Be Provided"}),setTimeout(function(){a.setState({errorOnPost:""})},9e3)},a.handleDeletePictureself=function(){var e=a.props.match.params.pictureself;"0"!==e?a.deletePictureselfApi(e).then(function(e){a.props.history.push("/"+a.state.channel_username)}).catch(function(e){a.setState({errorOnPost:"An Error Occured, Please Try Again"}),setTimeout(function(){a.setState({errorOnPost:""})},9e3)}):a.props.history.push("/"+a.state.channel_username)},a.deleteModalShow=function(){return a.setState({showDeleteModal:!0})},a.closeDeleteModal=function(){return a.setState({showDeleteModal:!1})},a.updateFeature=a.updateFeature.bind(Object(lt.a)(Object(lt.a)(a))),a.insertFeature=a.insertFeature.bind(Object(lt.a)(Object(lt.a)(a))),a.removeFeature=a.removeFeature.bind(Object(lt.a)(Object(lt.a)(a))),a.addFeature=a.addFeature.bind(Object(lt.a)(Object(lt.a)(a))),a.updateVariant=a.updateVariant.bind(Object(lt.a)(Object(lt.a)(a))),a.insertVariant=a.insertVariant.bind(Object(lt.a)(Object(lt.a)(a))),a.removeVariant=a.removeVariant.bind(Object(lt.a)(Object(lt.a)(a))),a.handleFeatureImportDropdownChange=a.handleFeatureImportDropdownChange.bind(Object(lt.a)(Object(lt.a)(a))),a.addVariants=a.addVariants.bind(Object(lt.a)(Object(lt.a)(a))),a.state={pictureself_id:a.props.match.params.pictureself,channel_username:"",pictureself_title:"",initial_pictureself_title:"",pictureself_description:"",features_to_include:{},features:{},feature_order:[],nfc:0,insertChecked:!1,feature_to_include:"create_new",features_with_imported_variants:[],importVariantsIsChecked:!1,variant_order:[],variant_urls:{},variant_names:{},variant_files:{},nvc:0,showDeleteModal:!1,errorOnPost:""},a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params.pictureself;this.setState({pictureself_id:t}),"0"!==t&&this.fetchPictureself(),this.fetchFeaturesToIncludeApi(t).then(function(t){e.setState({features_to_include:t.data})}).catch(function(e){var t=ge(e);alert(t)})}},{key:"handleFeatureImportDropdownChange",value:function(e,t){this.setState({feature_to_include:t.value,includeFeature:"create_new"!==t.value})}},{key:"render",value:function(){var e=this,t=this.state.feature_order.slice().reverse(),a=this.state.feature_order.length,n=[],i={key:"create_new",text:"(create new)",value:"create_new"};n.push(i);for(var s=0,o=Object.entries(this.state.features_to_include);s<o.length;s++){var c=o[s],l=Object(xt.a)(c,2),u=l[0],d=l[1];if(!this.state.feature_order.includes(u)){var h={};h.key=u,h.text=d,h.value=u,n.push(h)}}var p,m=t.map(function(t,n){return r.a.createElement(Nt,{key:t,feature_index:a-n-1,insert:e.state.insertChecked,updateFeature:e.updateFeature,insertFeature:e.insertFeature,remove_feature:e.removeFeature,title:t.indexOf("i")>-1?e.state.features_to_include[t.substring(0,t.indexOf("i"))]:e.state.features[t],feature_id:t,variant_order:e.state.variant_order[a-n-1],variant_names:e.state.variant_names,variant_urls:e.state.variant_urls,variant_files:e.state.variant_files,addVariants:e.addVariants,updateVariant:e.updateVariant,insertVariant:e.insertVariant,removeVariant:e.removeVariant,imported:t.indexOf("i")>-1,features_to_include:e.state.features_to_include,variantsAreImported:e.state.features_with_imported_variants.includes(t)})});this.state.feature_order.length>0&&(p=r.a.createElement(r.a.Fragment,null,r.a.createElement(Pt.a,{toggle:!0,size:"large",label:"Insert feature",style:{"margin-bottom":"0px"},checked:this.state.insertChecked,onChange:this.showInsertPositions}),r.a.createElement("br",null),r.a.createElement("br",null)));var f=this.state.feature_to_include,g=this.props.match.params.pictureself;return r.a.createElement("div",{style:{"margin-left":"35px","padding-bottom":"20px"}},r.a.createElement("p",{id:"editpictureself-header"},0==g?"Create New":"Edit ",r.a.createElement("b",null," ",0==g?"":this.state.initial_pictureself_title)),r.a.createElement(v.a,{to:"/help",target:"_blank"},r.a.createElement(I.a,{name:"question circle outline",style:{color:"dodgerBlue"}}),r.a.createElement("p",{id:"editpictureself-howitworks-link"},"How It Works")),r.a.createElement(Qe.a,{style:{marginTop:"15px"}},r.a.createElement(Qe.a.Input,{width:"11",size:"large",type:"text",name:"pictureself_title",placeholder:"Title",value:this.state.pictureself_title,onChange:function(t){return e.handlePictureselfTitleChange(t)}}),r.a.createElement(Qe.a.TextArea,{width:"11",name:"pictureself_description",placeholder:"Comment",value:this.state.pictureself_description,onChange:function(t){return e.handlePictureselfDescriptionChange(t)}})),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(E.a,{content:"Add feature",onClick:"create_new"===this.state.feature_to_include?this.addFeature:function(){return e.insertFeature(a,f,e.state.importVariantsIsChecked)}})," ",r.a.createElement(k.a,{onChange:function(t,n){return e.handleFeatureImportDropdownChange(t,n,a)},options:n,placeholder:"Choose feature to import",defaultValue:"create_new",selection:!0,value:f,style:{visibility:0===Object.keys(this.state.features_to_include).length?"hidden":"visible"}}),r.a.createElement(Pt.a,{label:"Import variants",style:{"margin-left":"5px",visibility:"create_new"===f?"hidden":"visible"},checked:this.state.importVariantsIsChecked,onChange:this.importVariantsCheckboxHandleChange}),r.a.createElement("br",null),r.a.createElement("br",null),p,r.a.createElement("div",null,m),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("p",{class:"error-on-post"},this.state.errorOnPost),r.a.createElement(E.a,{floated:"left",size:"large",icon:!0,color:"red",basic:!0,onClick:this.deleteModalShow},r.a.createElement(I.a,{name:"trash alternate outline"}),"DELETE"),r.a.createElement(At.a,{open:this.state.showDeleteModal,size:"small",onClose:this.closeDeleteModal},r.a.createElement(Ft.a,{icon:"trash alternate outline",content:"Delete pictureself"}),r.a.createElement(At.a.Content,null,r.a.createElement("p",null,"Are you sure you want to delete this pictureself?")),r.a.createElement(At.a.Actions,null,r.a.createElement(E.a,{onClick:this.closeDeleteModal,color:"blue",inverted:!0},r.a.createElement(I.a,{name:"remove"})," Cancel"),r.a.createElement(E.a,{color:"red",onClick:function(){return e.handleDeletePictureself()},inverted:!0},r.a.createElement(I.a,{name:"checkmark"})," Delete"))),r.a.createElement(E.a,{floated:"right",content:"SAVE",primary:!0,size:"large",style:{"margin-right":"35px","margin-bottom":"35px"},onClick:0===g?function(){return e.createPictureself()}:function(){return e.editPictureself()}}))}}]),t}(n.Component),Dt=(a(558),function(e){function t(e){var a;return Object(h.a)(this,t),(a=Object(m.a)(this,Object(f.a)(t).call(this,e))).fetchPictureselfsIndexApi=function(){return F.a.get(R+"user/liked-pictureselfs/",pe())},a.fetchPictureselfsIndex=function(){a.fetchPictureselfsIndexApi().then(function(e){a.setState({pictureselfs:e.data},function(){a.setState({isLoading:!1})})}).catch(function(e){ge(e)})},a.state={pictureselfs:[],isLoading:!0},a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.fetchPictureselfsIndex()}},{key:"render",value:function(){if(this.state.isLoading)return r.a.createElement("div",{style:{"margin-top":"35px"}},r.a.createElement(qe,null));return r.a.createElement("div",null,r.a.createElement("p",{id:"likes-title"},"Likes"),r.a.createElement(vt,{columnWidth:200,gutterWidth:10,gutterHeight:20,pictureselfs:this.state.pictureselfs}))}}]),t}(n.Component)),Ut=(a(559),function(e){function t(e){var a;return Object(h.a)(this,t),(a=Object(m.a)(this,Object(f.a)(t).call(this,e))).fetchChannels=function(){a.fetchChannelsApi().then(function(e){a.setState({channels:e.data},function(){a.setState({isLoading:!1})})}).catch(function(e){ge(e)})},a.fetchChannelsApi=function(){return F.a.get("http://127.0.0.1:8000/api/user/channels-subscribed-to/",pe())},a.state={channels:[],isLoading:!0},a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.fetchChannels()}},{key:"render",value:function(){var e=this.state,t=e.isLoading,a=e.channels;if(t)return r.a.createElement("div",{style:{"margin-top":"35px"}},r.a.createElement(qe,null));var n=a.map(function(e){var t=e.name,a=e.username,n=e.avatar;return r.a.createElement("div",{key:a,className:"userCard"},r.a.createElement(St,{username:a,name:t,avatar:n}))});return r.a.createElement("div",null," ",r.a.createElement("p",{id:"subscription-list-title"},"Subscriptions"),r.a.createElement("div",{className:"usersContainer"}," ",n))}}]),t}(n.Component)),Mt=a(280);function zt(e){var t=e.component,a=Object(Mt.a)(e,["component"]);return r.a.createElement(u.a,Object.assign({},a,{render:function(e){return he.getState().auth.isAuthenticated?r.a.createElement(t,e):r.a.createElement(ut.a,{to:{pathname:"/login",state:{from:e.location}}})}}))}var Vt=a(96),Ht=(a(560),function(e){function t(e){var a;return Object(h.a)(this,t),(a=Object(m.a)(this,Object(f.a)(t).call(this,e))).fetchPictureselfDisplayApi=function(e){return F.a.get(R+"p/"+e,pe())},a.fetchPictureselfDisplay=function(){var e=a.state.id;a.fetchPictureselfDisplayApi(e).then(function(e){a.setState({title:e.data.title,encoding:e.data.encoding,comment:e.data.description,ext:e.data.ext,username:e.data.username,name:e.data.name,width_height:e.data.width_height,isCustomizable:e.data.is_customizable,isLiked:e.data.is_liked,numberOfLikes:e.data.number_of_likes,date:e.data.timestamp,avatar:e.data.avatar},function(){a.setState({isLoading:!1},function(){a.props.location.pathname=="/p/"+a.props.match.params.pictureself+"/like"&&a.toggleLike();var e=a.buttonsDiv.clientHeight;a.setState({buttonsDivHeight:e})})})}).catch(function(e){var t=ge(e);alert(e),alert(t)})},a.toggleLikeApi=function(e){return F.a.get(R+"p/"+e+"/toggle-like/",pe())},a.toggleLike=function(){if(he.getState().auth.isAuthenticated)a.setState({likePopupIsVisible:!1}),a.setState({numberOfLikes:a.state.isLiked?a.state.numberOfLikes-1:a.state.numberOfLikes+1}),a.setState({isLiked:!a.state.isLiked}),a.toggleLikeApi(a.state.id);else{var e=a.props.location;e.pathname="/p/"+a.props.match.params.pictureself+"/like",a.props.history.push({pathname:"/login",state:{from:e}})}},a.redirectToEdit=function(){a.props.history.push({pathname:"/p/"+a.props.match.params.pictureself+"/edit/"})},a.redirectToCustomize=function(){a.props.history.push({pathname:"/p/"+a.props.match.params.pictureself+"/customize/"})},a.state={id:a.props.match.params.pictureself,title:"",comment:"",date:"",encoding:"",ext:"",width_height:[],username:"",name:"",avatar:"",isCustomizable:!1,isLiked:!1,numberOfLikes:0,likePopupIsVisible:!0,buttonsDivHeight:0,isLoading:!0},a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.fetchPictureselfDisplay()}},{key:"render",value:function(){var e=this;if(this.state.isLoading)return r.a.createElement("div",{style:{"margin-top":"35px"}},r.a.createElement(qe,null));var t=this.state.width_height[0]<300?(300-this.state.width_height[0])/2:0,a=this.state.width_height[1]<300?(300-this.state.width_height[1])/2:0,n=""==this.state.avatar?"https://afcm.ca/wp-content/uploads/2018/06/no-photo.png":this.state.avatar,i={borderRadius:3,opacity:.8,"padding-top":"0.25em","padding-bottom":"0.25em","padding-left":"0.5em","padding-right":"0.5em"},s=this.state.isCustomizable?r.a.createElement("div",{id:"p-customize-button",onClick:this.redirectToCustomize},"CUSTOMIZE"):r.a.createElement("div",null),o=this.state.width_height[1]<300?300:this.state.width_height[1],c=o-this.state.buttonsDivHeight,l=this.state.date,u=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sept","Oct","Nov","Dec"],d="";""!=l&&(d=("0"===l[5]?u[parseInt(l[6])-1]:u[parseInt(l.substr(5,2))-1])+" "+("0"===l[8]?l[9]:l.substr(8,2))+", "+l.substr(0,4));var h=he.getState().auth.username==this.state.username?r.a.createElement("div",{id:"p-edit-button"},r.a.createElement(E.a,{onClick:this.redirectToEdit,basic:!0},"Edit")):null;return r.a.createElement("div",{id:"p-container"},r.a.createElement("div",{id:"p-background"}),r.a.createElement("div",{id:"p-outer"},r.a.createElement("div",{id:"p-inner"},h,r.a.createElement("img",{style:{"padding-left":t,"padding-right":t,"padding-top":a,"padding-bottom":a,"border-right":"1px solid rgb(235, 235, 235)"},src:"data:image/".concat(this.state.ext,";base64,").concat(this.state.encoding),alt:this.state.title}),r.a.createElement("div",{id:"p-menu",style:{height:o}},r.a.createElement("div",{id:"p-info",style:{height:c}},r.a.createElement("p",{id:"p-title"},this.state.title),r.a.createElement(v.a,{to:"/".concat(this.state.username,"/")},r.a.createElement("div",{id:"p-channel"},r.a.createElement("img",{src:n,alt:"Avatar",id:"p-avatar"}),r.a.createElement("p",{id:"p-name"},this.state.name))),r.a.createElement("p",{id:"p-date"},d),r.a.createElement("div",{id:"p-comment"},r.a.createElement(Ot.a,{tagName:"p"},this.state.comment))),r.a.createElement("div",{id:"p-buttons"},s,r.a.createElement("div",{id:"p-like-download-buttons",ref:function(t){return e.buttonsDiv=t}},r.a.createElement(O.a,{position:"top center",mouseEnterDelay:750,verticalOffset:3,trigger:r.a.createElement("a",{href:"data:image/".concat(this.state.ext,";base64,").concat(this.state.encoding),download:"pictureself.".concat(this.state.ext)},r.a.createElement(E.a,{style:{padding:"10px","margin-right":"5px",backgroundColor:"transparent"},icon:!0},r.a.createElement(I.a,{size:"large",name:"arrow down"}))),content:"Download",size:"large",style:i,inverted:!0,basic:!0}),r.a.createElement(O.a,{position:"top center",mouseEnterDelay:750,verticalOffset:-5,disabled:!this.state.likePopupIsVisible,trigger:r.a.createElement(E.a,{as:"div",style:{"margin-left":"-10px",backgroundColor:"transparent"},labelPosition:"right",onClick:this.toggleLike},r.a.createElement(E.a,{style:{padding:"10px",backgroundColor:"transparent"},icon:!0},r.a.createElement(I.a,{size:"large",name:this.state.isLiked?"heart":"heart outline",color:"red"})),r.a.createElement(Vt.a,{style:{backgroundColor:"transparent",color:this.state.isLiked?"rgb(215, 55, 55)":"",padding:"0px"},as:"a"},0==this.state.numberOfLikes?"":this.state.numberOfLikes)),content:this.state.isLiked?"Unike":"Like",size:"large",style:i,inverted:!0,basic:!0}))))),r.a.createElement("div",{id:"p-post-inner-space"})))}}]),t}(n.Component)),Wt=(a(561),function(e){function t(e){var a;return Object(h.a)(this,t),(a=Object(m.a)(this,Object(f.a)(t).call(this,e))).fetchPictureselfFeaturesApi=function(e){return F.a.get(R+"features/p/"+e,pe())},a.fetchChannelFeaturesApi=function(e){return F.a.get(R+"features/"+e,pe())},a.fetchFeaturesApiPictureselfChannelSwitch=function(){return"pictureself"==a.props.type?a.fetchPictureselfFeaturesApi(a.props.id):a.fetchChannelFeaturesApi(a.props.id)},a.fetchFeatures=function(){a.fetchFeaturesApiPictureselfChannelSwitch().then(function(e){a.setState({feature_ids:e.data.feature_ids,feature_titles:e.data.feature_titles});var t=e.data.feature_ids[0];a.handleActiveFeatureChange(t)}).catch(function(e){var t=ge(e);alert(e),alert(t)})},a.fetchPictureselfOptionsApi=function(e){return"pictureself"==a.props.type?F.a.get(R+"p/"+a.props.id+"/options/"+e+"/",pe()):F.a.get(R+"p/options/"+e+"/",pe())},a.fetchPictureselfOptions=function(e){a.fetchPictureselfOptionsApi(e).then(function(e){a.setState({encodings:e.data.encodings,activeOptionIndex:e.data.active_option_index,ext:e.data.ext,alts:e.data.alts,widths_heights:e.data.widths_heights})}).catch(function(e){var t=ge(e);alert(e),alert(t)})},a.postNewPosition=function(e,t){return F.a.post(R+"customizations/"+e+"/edit/",{position:t},pe())},a.handleActiveFeatureChange=function(e){a.setState({activeFeatureId:e},function(){a.fetchPictureselfOptions(e)})},a.handleActiveOptionChange=function(e){a.setState({activeOptionIndex:e}),a.postNewPosition(a.state.activeFeatureId,e)},a.handleActiveFeatureChange=a.handleActiveFeatureChange.bind(Object(lt.a)(Object(lt.a)(a))),a.handleActiveOptionChange=a.handleActiveOptionChange.bind(Object(lt.a)(Object(lt.a)(a))),a.state={feature_ids:[],feature_titles:[],activeFeatureId:0,encodings:[],activeOptionIndex:-1,ext:"",alts:[],widths_heights:[]},a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.fetchFeatures()}},{key:"render",value:function(){var e,t=this,a=this.props.isAuthenticated,n=[],i=this.state.widths_heights,s=this.state.encodings;for(e=0;e<i.length;e++){var o=i[e][0]>200?i[e][1]*(200/i[e][0]):i[e][1]+(200-i[e][0]);n.push(o)}var c=this.state.feature_ids.map(function(e,a){return r.a.createElement(E.a,{basic:!0,key:e,onClick:function(){return t.handleActiveFeatureChange(e)},content:t.state.feature_titles[a],active:t.state.activeFeatureId==e,size:"large",style:{filter:"brightness(109%)","margin-right":"7px","margin-bottom":"5px"},compact:!0})}),l=this.state.activeOptionIndex,u=s.map(function(e,a){return r.a.createElement("div",{key:a.toString(),onClick:function(){return t.handleActiveOptionChange(a)},style:{width:"200px",height:n[a].toString()+"px","box-shadow":"0px "+n[a].toString()+"px inset rgba(175,175,175,0.075)",border:a==l?"5px solid DodgerBlue":0==a&&-1==l?"5px solid Silver":""}},r.a.createElement("img",{src:"data:image/".concat(t.state.ext,";base64,").concat(e),alt:t.state.alts[a],style:{"max-width":"100%",width:a==l&&i[a][0]>192?192..toString():"",height:"auto",margin:a==l||0==a&&-1==l?(192>i[a][0]?(192-i[a][0])/2:"0")+"px":(200>i[a][0]?(200-i[a][0])/2:"0")+"px","z-index":"-1",position:"relative"}}))});s.map(function(e,a){return r.a.createElement("div",{onClick:function(){return t.handleActiveOptionChange(a)},style:{}},r.a.createElement("img",{src:"data:image/".concat(t.state.ext,";base64,").concat(e),alt:t.state.alts[a],style:{}}))});return a?r.a.createElement("div",null,r.a.createElement(v.a,{to:"pictureself"==this.props.type?"/p/".concat(this.props.id,"/"):"/".concat(this.props.id,"/")},r.a.createElement(E.a,{style:{backgroundColor:"transparent","margin-left":"10px","margin-top":"5px",color:"rgb(26, 141, 255)","font-size":"18px"},icon:!0},r.a.createElement(I.a,{style:{"padding-right":"25px",color:"rgb(0, 128, 255)"},name:"check"}),"DONE")),r.a.createElement("div",{id:"feature-menu"},c),r.a.createElement("br",null),r.a.createElement(bt.a,{monitorImagesLoaded:!0,columnWidth:200,gutterWidth:10,gutterHeight:10,duration:0},u)):r.a.createElement("p",null,"Customization isn't available when logged out.")}}]),t}(n.Component)),Gt=function(e){function t(){return Object(h.a)(this,t),Object(m.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this.props.isAuthenticated,t="pictureself"in this.props.match.params?"pictureself":"channel",a="pictureself"==t?this.props.match.params.pictureself:this.props.match.params.username;return r.a.createElement(Wt,{isAuthenticated:e,type:t,id:a})}}]),t}(n.Component),Bt=Object(o.b)(function(e){return{isAuthenticated:e.auth.isAuthenticated}})(Gt),Qt=function(e){function t(e){var a;return Object(h.a)(this,t),(a=Object(m.a)(this,Object(f.a)(t).call(this,e))).fetchPictureselfsIndexApi=function(){return F.a.get(R+"p/index/",pe())},a.fetchPictureselfsIndex=function(){a.fetchPictureselfsIndexApi().then(function(e){a.setState({pictureselfs:e.data},function(){a.setState({isLoading:!1})})}).catch(function(e){var t=ge(e);alert(t)})},a.state={pictureselfs:[],isLoading:!0},a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.fetchPictureselfsIndex()}},{key:"render",value:function(){if(this.state.isLoading)return r.a.createElement("div",{style:{"margin-top":"35px"}},r.a.createElement(qe,null));return r.a.createElement(vt,{columnWidth:200,gutterWidth:10,gutterHeight:20,pictureselfs:this.state.pictureselfs})}}]),t}(n.Component),qt=(a(562),function(e){function t(){return Object(h.a)(this,t),Object(m.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("p",{id:"about-title"},"About"))}}]),t}(n.Component)),Jt=Object(b.a)(qt),Kt=(a(563),function(e){function t(){return Object(h.a)(this,t),Object(m.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("p",{id:"blog-title"},"Blog"))}}]),t}(n.Component)),Xt=Object(b.a)(Kt),Yt=(a(564),function(e){function t(){return Object(h.a)(this,t),Object(m.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=["square face shape","mouth","nose","green eyes","eyebrows","glasses","hait","hat"].reverse().map(function(e,t){return r.a.createElement("p",{style:{margin:"auto","margin-bottom":"5px","text-align":"center",width:"350px","border-style":4==t||7==t?"solid":"dashed","border-width":"1px"}},e," layer")});return r.a.createElement("div",null,r.a.createElement("p",{id:"help-title"},"Help"),r.a.createElement("p",{id:"help-howitworks-title"},"How It Works"),r.a.createElement("p",{id:"help-howitworks"},"A ",r.a.createElement("b",null,"pictureself")," consists of customizable layers represented through ",r.a.createElement("b",null,"features"),".",r.a.createElement("br",null),'For example, "face shape" + "mouth" + "nose" + "eyes" + "eyebrows" + "glasses" + "hair" + "hat".',r.a.createElement("br",null),r.a.createElement("br",null),"A feature can have different implementations - ",r.a.createElement("b",null,"variants"),': "face shape" - ["round", "oval", "square" etc.], "eyes" - ["brown","blue","green" etc.]',r.a.createElement("br",null),r.a.createElement("br",null)," Implementation depends on ",r.a.createElement("b",null,"customization")," performed by a user.",r.a.createElement("br",null),'So if a user choses, for example, "face shape" as "square" and "eyes" as "green" the pictureself will be composed as follows:',r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("p",{style:{"text-align":"center"}},e),r.a.createElement("br",null),"Including a feature in different pictureselfs(surprised, angry, happy etc.) means different implementation with the same customization."," ",r.a.createElement("br",null),'Thus if a user have already chosen "green"for "eyes" feature - in the pictureself that represents, for example, a surprised state - customization remains - eyes would be green but widened.',r.a.createElement("br",null),"This means that the creator includes feature and provides corresponding variants in the same order: for eyes that would be brown widened, blue widened, green widened.",r.a.createElement("br",null),r.a.createElement("br",null),"In general, a feature is just the index of the variant chosen by a user. So if a user chooses green that means that whenever this feature is included in other pictureselfs for this particular user the variant number 3 would be displayed.",r.a.createElement("br",null)," ",r.a.createElement("br",null),'If implementation of included feature should be the same as in the original pictureself "import variants" checkbox can be used to import corresponding images.'))}}]),t}(n.Component)),Zt=Object(b.a)(Yt),$t=(a(565),function(e){function t(){return Object(h.a)(this,t),Object(m.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("p",{id:"privacy-title"},"Privacy"))}}]),t}(n.Component)),ea=Object(b.a)($t),ta=(a(566),function(e){function t(){return Object(h.a)(this,t),Object(m.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("p",{id:"terms-title"},"Terms"))}}]),t}(n.Component)),aa=Object(b.a)(ta),na=(a(567),function(e){function t(e){var a;return Object(h.a)(this,t),(a=Object(m.a)(this,Object(f.a)(t).call(this,e))).fetchPictureselfsSearchApi=function(){return F.a.get(R+"p/search/"+a.props.location.search.substring(3,a.props.location.search.length),pe())},a.fetchPictureselfsSearch=function(){a.fetchPictureselfsSearchApi().then(function(e){a.setState({pictureselfs:e.data},function(){a.setState({isLoading:!1})})}).catch(function(e){var t=ge(e);alert(t)})},a.state={pictureselfs:[],isLoading:!0},a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.fetchPictureselfsSearch()}},{key:"componentDidUpdate",value:function(e){this.props.location.search!==e.location.search&&this.fetchPictureselfsSearch()}},{key:"render",value:function(){var e=this.state.isLoading,t=0==this.state.pictureselfs.length?r.a.createElement("p",{id:"search-no-results-message"},"No results"):null;if(e)return r.a.createElement("div",{style:{"margin-top":"35px"}},r.a.createElement(qe,null));return r.a.createElement("div",null,t,r.a.createElement(vt,{columnWidth:200,gutterWidth:10,gutterHeight:20,pictureselfs:this.state.pictureselfs}))}}]),t}(n.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(r.a.createElement(o.a,{store:he},r.a.createElement(d.a,{loading:r.a.createElement(qe,null),persistor:de},r.a.createElement(c.a,null,r.a.createElement(n.Fragment,null,r.a.createElement("header",{className:"header-background"}),r.a.createElement("div",{className:"app-layout"},r.a.createElement(We,null),r.a.createElement(l.a,null,r.a.createElement(u.a,{path:"/browse",component:kt}),r.a.createElement(u.a,{path:"/about",component:Jt}),r.a.createElement(u.a,{path:"/blog",component:Xt}),r.a.createElement(u.a,{path:"/help",component:Zt}),r.a.createElement(u.a,{path:"/privacy",component:ea}),r.a.createElement(u.a,{path:"/terms",component:aa}),r.a.createElement(u.a,{path:"/login",component:ft}),r.a.createElement(zt,{path:"/likes",component:Dt}),r.a.createElement(zt,{path:"/subscriptions",component:Ut}),r.a.createElement(u.a,{path:"/search",component:na}),r.a.createElement(u.a,{path:"/p/:pictureself/customize",component:Bt}),r.a.createElement(zt,{path:"/p/:pictureself/edit",component:Tt}),r.a.createElement(u.a,{path:"/p/:pictureself/like",component:Ht}),r.a.createElement(u.a,{path:"/p/:pictureself",component:Ht}),r.a.createElement(u.a,{exact:!0,path:"/",component:Qt}),r.a.createElement(u.a,{path:"/:username/customize",component:Bt}),r.a.createElement(u.a,{path:"/:username",component:jt}),r.a.createElement(u.a,{component:It})),r.a.createElement("br",null)),r.a.createElement(ct,null))))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[290,1,2]]]);
//# sourceMappingURL=main.836d476b.chunk.js.map