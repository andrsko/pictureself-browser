(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{215:function(e,t,a){},267:function(e,t,a){e.exports=a.p+"static/media/logo.9885d522.svg"},290:function(e,t,a){e.exports=a(568)},295:function(e,t,a){},301:function(e,t,a){},392:function(e,t,a){},401:function(e,t,a){},423:function(e,t,a){},424:function(e,t,a){},425:function(e,t,a){},426:function(e,t,a){},427:function(e,t,a){},428:function(e,t,a){},429:function(e,t,a){},430:function(e,t,a){},431:function(e,t,a){},501:function(e,t,a){},502:function(e,t,a){},503:function(e,t,a){},504:function(e,t,a){},505:function(e,t,a){},558:function(e,t,a){},559:function(e,t,a){},560:function(e,t,a){},561:function(e,t,a){},562:function(e,t,a){},563:function(e,t,a){},564:function(e,t,a){},565:function(e,t,a){},566:function(e,t,a){},567:function(e,t,a){},568:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(53),s=a.n(i),o=(a(295),a(296),a(27)),c=a(590),l=a(592),u=a(581),d=a(251),h=a(8),p=a(9),m=a(12),f=a(10),g=a(11),v=a(577),b=a(576),E=a(569),O=a(589),y=(a(301),function(e){function t(){return Object(h.a)(this,t),Object(m.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"navlinkContainer"},r.a.createElement(b.a,{to:"/"},r.a.createElement(E.a,{style:{"background-color":"transparent","font-family":'"Arial", Helvetica, sans-serif',"font-weight":"normal",margin:"0",color:"rgb(55,55,55)",padding:"10px"},content:"Home",size:"large"})),r.a.createElement(b.a,{to:"/browse"},r.a.createElement(E.a,{style:{"background-color":"transparent","font-family":'"Arial", Helvetica, sans-serif',"font-weight":"normal",margin:"0",color:"rgb(55,55,55)",padding:"10px"},content:"Browse",size:"large"})),r.a.createElement(O.a,{trigger:r.a.createElement(E.a,{style:{"background-color":"transparent","font-family":'"Arial", Helvetica, sans-serif',"font-weight":"bold","font-size":"20px",margin:"0",color:"rgb(55,55,55)",padding:"10px"},content:"\u22ef",size:"large"}),flowing:!0,hoverable:!0,on:"click",position:"bottom center"},r.a.createElement(b.a,{to:"/about"},r.a.createElement("p",{className:"navlink-ellipsis-link"},"About")),r.a.createElement(b.a,{to:"/blog"},r.a.createElement("p",{className:"navlink-ellipsis-link"},"Blog")),r.a.createElement(b.a,{to:"/terms"},r.a.createElement("p",{className:"navlink-ellipsis-link"},"Terms")),r.a.createElement(b.a,{to:"/privacy"},r.a.createElement("p",{className:"navlink-ellipsis-link"},"Privacy Policy")),r.a.createElement(b.a,{to:"/help"},r.a.createElement("p",{className:"navlink-ellipsis-link"},"Help"))))}}]),t}(n.Component)),_=Object(v.a)(y),j=(a(215),function(e){function t(){return Object(h.a)(this,t),Object(m.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this.props,t=e.showLogin,a=e.showRegister;return r.a.createElement("div",{className:"guestMenu"},r.a.createElement(E.a,{style:{"background-color":"transparent","font-family":'"Arial", Helvetica, sans-serif',"font-weight":"normal","font-size":"14px",margin:"0",color:"rgb(55,55,55)",border:"1px solid rgb(215,215,215)"},content:"Log in",size:"large",id:"btn-log-in",onClick:t,compact:!0}),r.a.createElement(E.a,{style:{"background-color":"transparent","font-family":'"Arial", Helvetica, sans-serif',"font-weight":"normal","font-size":"14px",margin:"0",color:"rgb(55,55,55)"},id:"btn-sign-up",content:"Sign up",size:"large",onClick:a}))}}]),t}(n.Component)),C=a(278),S=(a(392),function(e){var t=e.className,a=e.avatar,n=e.centered,i=e.link;a=a||"https://afcm.ca/wp-content/uploads/2018/06/no-photo.png",n=null===n||n,t=t||"avatar";var s=r.a.createElement(C.a,{className:t,src:a,centered:n});return i?r.a.createElement(b.a,{to:i},s):s}),w=a(584),k=a(70),I=function(e){function t(){return Object(h.a)(this,t),Object(m.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this.props,t=e.username,a=e.logout,n=e.showEditProfile,i=e.history,s=e.name,o=""==this.props.avatar?"https://afcm.ca/wp-content/uploads/2018/06/no-photo.png":this.props.avatar;return r.a.createElement("div",{className:"userMenuOuter"},r.a.createElement(O.a,{position:"bottom center",mouseEnterDelay:750,verticalOffset:3,trigger:r.a.createElement(E.a,{style:{"background-color":"transparent","font-family":'"Arial", Helvetica, sans-serif',"font-weight":"normal","font-size":"28px","margin-left":"0px","margin-right":"5px",color:"rgb(55,55,55)",padding:"10px"},content:"+",size:"large",onClick:function(){i.push("/p/0/edit")}}),content:"New Pictureself",size:"large",style:{borderRadius:3,opacity:.8,"padding-top":"0.25em","padding-bottom":"0.25em","padding-left":"0.5em","padding-right":"0.5em"},inverted:!0,basic:!0}),r.a.createElement(w.a,{id:"usermenu-dropdown",selection:!0,compact:!0,trigger:r.a.createElement("div",{style:{display:"flex","align-items":"center","min-width":"125px"}},r.a.createElement("div",null,r.a.createElement(C.a,{id:"usermenu-dropdown-avatar",src:o})),r.a.createElement("div",null,r.a.createElement("p",{style:{"margin-left":"10px","margin-right":"0px",color:"rgb(55,55,55)","font-size":"16px"}},s||t)),r.a.createElement("div",{style:{display:"block","text-align":"right"}},r.a.createElement(k.a,{style:{"margin-left":"5px",color:"rgb(55,55,55)"},name:"caret down"}))),icon:"null"},r.a.createElement(w.a.Menu,{style:{"border-color":"white"}},r.a.createElement(w.a.Item,{onClick:function(){i.push("/".concat(t))},style:{color:"rgb(55,55,55)"},icon:"user circle",text:"My channel"}),r.a.createElement(w.a.Item,{onClick:function(){i.push("/subscriptions")},style:{color:"rgb(55,55,55)"},icon:"th list",text:"Subscriptions"}),r.a.createElement(w.a.Item,{onClick:function(){i.push("/likes")},style:{color:"rgb(55,55,55)"},icon:"like",text:"Likes"}),r.a.createElement(w.a.Item,{onClick:n,style:{color:"rgb(55,55,55)"},icon:"edit",text:"Edit profile"}),r.a.createElement(w.a.Item,{onClick:a,style:{color:"rgb(55,55,55)"},icon:"sign out",text:"Logout"}))))}}]),t}(n.Component),L=Object(v.a)(I),P=function(e){function t(){return Object(h.a)(this,t),Object(m.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this.props,t=e.isAuthenticated,a=e.username,n=e.name,i=e.avatar,s=e.logout,o=e.isLoading,c=e.showRegister,l=e.showLogin,u=e.showEditProfile;return t?r.a.createElement(L,{username:a,name:n,avatar:i,logout:s,showEditProfile:u,isLoading:o}):r.a.createElement(j,{showRegister:c,showLogin:l})}}]),t}(n.Component),x=(a(401),a(22)),F=a.n(x),A="https://pictureself.herokuapp.com/api/",R=A+"user/",U=R+"register/",D=R+"login/",V=R+"logout/",N=R+"avatar/"+"edit/",T=a(41),z=a(19),M={isLoading:!1,isAuthenticated:!1,username:null,name:null,avatar:null,token:null,error:null},H={isEditing:!1,editError:null,editSuccess:!1},W=Object(z.a)({},M,H),G=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:W,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN_REQUEST":return Object(z.a)({},e,{isLoading:!0,isAuthenticated:!1,error:null});case"LOGIN_SUCCESS":return Object(z.a)({},e,{isLoading:!1,isAuthenticated:!0,token:t.token,username:t.username,avatar:t.avatar,name:t.name,error:null});case"LOGIN_FAILURE":return Object(z.a)({},e,M,{error:t.error});case"EDIT_PROFILE_REQUEST":return Object(z.a)({},e,{isEditing:!0,editError:null,editSuccess:!1});case"EDIT_PROFILE_SUCCESS":return Object(z.a)({},e,{isEditing:!1,editError:null,editSuccess:!0,avatar:t.avatar||e.avatar,name:t.name||e.name});case"EDIT_PROFILE_FAILURE":return Object(z.a)({},e,H,{editError:t.error});case"EDIT_PROFILE_RESET":return Object(z.a)({},e,H);case"LOGIN_RESET":return Object(z.a)({},e,M);case"LOGOUT":return W;default:return e}},B={modalType:null,modalProps:{}},Q=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:B,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SHOW_MODAL":return{modalType:t.modalType,modalProps:t.modalProps};case"HIDE_MODAL":return{modalType:null,modalProps:{}};default:return e}},q={isLoading:!1,error:null},J=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:q,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"REGISTER_REQUEST":return Object(z.a)({},e,{isLoading:!0,error:null});case"REGISTER_SUCCESS":return{isLoading:!1,error:null};case"REGISTER_FAILURE":return{isLoading:!1,error:t.error};case"REGISTER_RESET":return q;default:return e}},K={isLoading:!1,profile:null,error:null},X=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:K,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_USER_PROFILE_REQUEST":return Object(z.a)({},e,{isLoading:!0,error:null});case"FETCH_USER_PROFILE_SUCCESS":return{isLoading:!1,profile:t.profile,error:null};case"FETCH_USER_PROFILE_FAILURE":return Object(z.a)({},K,{error:t.error});default:return e}},Y={isLoading:!1,users:null,error:null},Z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Y,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_USERS_REQUEST":return Object(z.a)({},e,{isLoading:!0,error:null});case"FETCH_USERS_SUCCESS":return{isLoading:!1,users:t.users,error:null};case"FETCH_USERS_FAILURE":return Object(z.a)({},Y,{error:t.error});default:return e}},$=Object(T.c)({auth:G,modal:Q,register:J,userProfile:X,users:Z}),ee=a(264),te=a(169),ae=a(265),ne=a.n(ae),re=a(266),ie=a.n(re),se=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||T.d,oe={key:"root",storage:ie.a,stateReconciler:ne.a},ce=Object(te.a)(oe,$),le=Object(T.e)(ce,se(Object(T.a)(ee.a))),ue=Object(te.b)(le),de=le,he=function(){return de.getState().auth.isAuthenticated?{headers:{Authorization:"Token "+de.getState().auth.token}}:null},pe=function(e){var t=new FormData;t.append("file",e);var a={headers:{Authorization:he().headers.Authorization,"content-type":"multipart/form-data"}};return F.a.post(N,t,a)},me=function(e,t){return{type:"SHOW_MODAL",modalType:e,modalProps:t}},fe=function(e){try{if(!e.response)return"Error: Network Error";if(e.response.data){var t=e.response.data;if(t.detail)return"Invalid token."===t.detail?"Invalid Token. Please re-login.":t.detail;if(t[0])return t[0];var a=Object.keys(t)[0],n=t[a][0];if(["non_field_errors","detail"].indexOf(a)>=0)return n;var r=String(a).replace("_"," ");return r.charAt(0).toUpperCase()+r.substring(1)+": "+n}}catch(e){return console.log(e),"Something wrong happened. Please report this."}},ge=function(e,t){return function(a){a(ve()),function(e,t){return F.a.post(D,{username:e,password:t},he())}(e,t).then(function(e){a(be(e.data)),a({type:"HIDE_MODAL"})}).catch(function(e){var t=fe(e);a(Ee(t))})}},ve=function(){return{type:"LOGIN_REQUEST"}},be=function(e){return{type:"LOGIN_SUCCESS",token:e.token,username:e.username,name:e.name,avatar:e.avatar}},Ee=function(e){return{type:"LOGIN_FAILURE",error:e}},Oe=function(){return function(e){F.a.post(V,null,he()),e({type:"LOGOUT"})}},ye=function(e){return function(t){t(_e());var a=de.getState().auth.username;a?function(e,t){return F.a.put(R+e+"/edit/",t,he())}(a,e).then(function(a){t(je(e))}).catch(function(e){var a=fe(e);t(Ce(a))}):t(Ce("Not authenticated"))}},_e=function(){return{type:"EDIT_PROFILE_REQUEST"}},je=function(e){return{type:"EDIT_PROFILE_SUCCESS",avatar:e.avatar,name:e.name}},Ce=function(e){return{type:"EDIT_PROFILE_FAILURE",error:e}},Se=function(e){return function(t){t(we()),function(e){return F.a.post(U,e,he())}(e).then(function(a){t(ke()),t(ge(e.username,e.password))}).catch(function(e){var a=fe(e);t(Ie(a))})}},we=function(){return{type:"REGISTER_REQUEST"}},ke=function(){return{type:"REGISTER_SUCCESS"}},Ie=function(e){return{type:"REGISTER_FAILURE",error:e}},Le=function(e){return function(t){t(Pe()),function(e){return F.a.get(R+e,he())}(e).then(function(e){t(xe(e.data))}).catch(function(e){var a=fe(e);t(Fe(a))})}},Pe=function(){return{type:"FETCH_USER_PROFILE_REQUEST"}},xe=function(e){return{type:"FETCH_USER_PROFILE_SUCCESS",profile:e}},Fe=function(e){return{type:"FETCH_USER_PROFILE_FAILURE",error:e}},Ae=function(){return function(e){e(Re()),F.a.get(R+"channels/",he()).then(function(t){e(Ue(t.data))}).catch(function(t){var a=fe(t);e(De(a))})}},Re=function(){return{type:"FETCH_USERS_REQUEST"}},Ue=function(e){return{type:"FETCH_USERS_SUCCESS",users:e}},De=function(e){return{type:"FETCH_USERS_FAILURE",error:e}},Ve=a(267),Ne=a.n(Ve),Te=(a(423),function(){return r.a.createElement("div",{className:"logoContainer"},r.a.createElement(b.a,{to:"/"},r.a.createElement("img",{id:"logo",src:Ne.a,alt:"logo",title:"Pictureself Home"})))}),ze=a(578),Me=function(e){function t(e){var a;return Object(h.a)(this,t),(a=Object(m.a)(this,Object(f.a)(t).call(this,e))).handleSearchInputChange=function(e){a.setState({searchQuery:e.target.value})},a.handleSearchInputSubmit=function(){a.props.history.push("/search?q="+a.state.searchQuery)},a.handleSearchInputKeyPress=function(e){13==e.charCode&&a.props.history.push("/search?q="+a.state.searchQuery)},a.state={searchQuery:""},a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this.props,t=e.isAuthenticated,a=e.username,n=e.name,i=e.avatar,s=e.handleLogout,o=e.isLoading,c=e.showRegister,l=e.showLogin,u=e.showEditProfile;return r.a.createElement("div",{className:"headerContainerWrapperSticky"},r.a.createElement("div",{className:"headerContainer"},r.a.createElement("div",{id:"header-logo-search"},r.a.createElement(Te,null),r.a.createElement(ze.a,{style:{height:"30px",width:"370px","margin-right":"15px"},icon:{name:"search",link:!0,onClick:this.handleSearchInputSubmit},placeholder:"Search...",value:this.state.searchQuery,onChange:this.handleSearchInputChange,onKeyPress:this.handleSearchInputKeyPress}),r.a.createElement(_,null)),r.a.createElement(P,{isAuthenticated:t,username:a,name:n,avatar:i,logout:s,isLoading:o,showRegister:c,showLogin:l,showEditProfile:u})))}}]),t}(n.Component),He=Object(o.b)(function(e){return{username:e.auth.username,name:e.auth.name,avatar:e.auth.avatar,isAuthenticated:e.auth.isAuthenticated,isLoading:e.auth.isLoading}},function(e){return{handleLogout:function(){e(Oe())},showRegister:function(){e(me("REGISTER",{}))},showLogin:function(){e(me("LOGIN",{}))},showEditProfile:function(){e(me("EDIT_PROFILE",{}))}}})(Object(v.a)(Me)),We=a(42),Ge=a(585),Be=a(582),Qe=(a(424),function(e){return r.a.createElement("div",{className:e.className||"loader"},r.a.createElement("div",{className:"loader-spinning-wheel"}))}),qe=(a(425),function(e){function t(){return Object(h.a)(this,t),Object(m.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this.props,t=e.loading,a=e.loadingClassName,n=e.loadingMessage,i=e.error,s=e.errorClassName,o=e.errorMessage,c=e.success,l=e.successClassName,u=e.successMessage,d=e.nothing,h=e.nothingClassName,p=e.nothingMessage,m=e.type;return t?"modal"===m?r.a.createElement("div",{className:a||"statusMessage-modal"},r.a.createElement(Ge.a,{attached:!0,icon:!0},r.a.createElement(Ge.a.Content,null,r.a.createElement(k.a,{name:"circle notched",loading:!0,size:"big"}),n||"Loading ..."))):r.a.createElement("div",{className:a||"statusMessage-default"},r.a.createElement(Qe,null),r.a.createElement("br",null)):i?"modal"===m?r.a.createElement("div",{className:s||"statusMessage-modal"},r.a.createElement(Ge.a,{attached:!0,error:!0,icon:!0},r.a.createElement(Ge.a.Content,null,r.a.createElement(k.a,{name:"thumbs outline down",size:"big"}),o||i||"Sorry, something went wrong"))):r.a.createElement("div",{className:s||"statusMessage-default"},r.a.createElement(Ge.a,{error:!0},r.a.createElement(Ge.a.Content,null,r.a.createElement(k.a,{name:"thumbs outline down",size:"big"}),o||i||"Sorry, something went wrong"))):c?"modal"===m?r.a.createElement("div",{className:l||"statusMessage-modal"},r.a.createElement(Ge.a,{attached:!0,positive:!0,icon:!0},r.a.createElement(Ge.a.Content,null,r.a.createElement(k.a,{name:"thumbs outline up",size:"big"}),u||"Successful"))):r.a.createElement("div",{className:l||"statusMessage-default"},r.a.createElement(Ge.a,{positive:!0},r.a.createElement(Ge.a.Content,null,r.a.createElement(k.a,{name:"thumbs outline up",size:"big"}),u||"Successful"))):d?"modal"===m?r.a.createElement("div",{className:h||"statusMessage-modal"},r.a.createElement(Ge.a,{attached:!0,error:!0,icon:!0},r.a.createElement(Ge.a.Content,null,r.a.createElement(k.a,{name:"thumbs outline down",size:"big"}),p||"Successful"))):r.a.createElement("div",{className:h||"statusMessage-default"},r.a.createElement(Ge.a,{error:!0},r.a.createElement(Ge.a.Content,null,r.a.createElement(k.a,{name:"thumbs outline down",size:"big"}),p||"Nothing to display"))):null}}]),t}(n.Component)),Je=(a(426),function(e){function t(e){var a;return Object(h.a)(this,t),(a=Object(m.a)(this,Object(f.a)(t).call(this,e))).handleChange=function(e,t){var n=t.name,r=t.value;a.setState(Object(We.a)({},n,r))},a.handleCheckbox=function(){a.setState({checked:!a.state.checked})},a.isFormValid=function(){var e=a.state,t=e.username,n=e.name,r=e.email,i=e.password,s=e.checked,o=!0;return t&&n&&r&&i&&s||(o=!1),o},a.handleSubmit=function(e){if(a.isFormValid()){var t={username:a.state.username,name:a.state.name,email:a.state.email,password:a.state.password};a.props.handleRegister(t)}},a.state={username:"",name:"",email:"",password:"",checked:!0},a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this.props,t=e.isLoading,a=e.error,n=e.showLogin,i=r.a.createElement(qe,{error:a,errorMessage:a||"Logging In Error",loading:t,loadingMessage:"Registering your account",type:"modal"});return r.a.createElement("div",null,r.a.createElement(Ge.a,{attached:!0,header:"Sign Up",content:"Fill out the form below to sign up for a new account"}),i,r.a.createElement(Be.a,{className:"attached fluid segment"},r.a.createElement(Be.a.Input,{required:!0,label:"Username",placeholder:"Username",type:"text",name:"username",value:this.state.username,onChange:this.handleChange}),r.a.createElement(Be.a.Input,{required:!0,label:"Name",placeholder:"Name",type:"text",name:"name",value:this.state.name,onChange:this.handleChange}),r.a.createElement(Be.a.Input,{required:!0,label:"Email",placeholder:"Email",type:"email",name:"email",value:this.state.email,onChange:this.handleChange}),r.a.createElement(Be.a.Input,{required:!0,label:"Password",type:"password",name:"password",value:this.state.password,onChange:this.handleChange}),r.a.createElement(Be.a.Checkbox,{inline:!0,required:!0,label:"I agree to the terms and conditions",name:"agreement",checked:this.state.checked,onChange:this.handleCheckbox}),r.a.createElement(E.a,{color:"blue",loading:t,disabled:t,onClick:this.handleSubmit},"Submit")),r.a.createElement(Ge.a,{attached:"bottom",warning:!0},r.a.createElement(k.a,{name:"help"}),"Already signed up?\xa0",r.a.createElement("a",{className:"register-login",onClick:n},"Log in here"),"\xa0instead."))}}]),t}(n.Component)),Ke=(a(427),function(e){function t(){var e,a;Object(h.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(m.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(r)))).listenKeyboard=function(e){"Escape"!==e.key&&27!==e.keyCode||a.props.onClose()},a.closeModal=function(){a.props.onClose()},a.onDialogClick=function(e){e.stopPropagation()},a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.props.onClose&&window.addEventListener("keydown",this.listenKeyboard,!0)}},{key:"componentWillUnmount",value:function(){this.props.onClose&&window.removeEventListener("keydown",this.listenKeyboard,!0)}},{key:"render",value:function(){var e=this.props.overlayStyle?this.props.overlayStyle:{},t=this.props.contentStyle?this.props.contentStyle:{},a=this.props.dialogStyle?this.props.dialogStyle:{};return r.a.createElement("div",null,r.a.createElement("div",{className:"modal-overlay-div",style:e}),r.a.createElement("div",{className:"modal-content-div",style:t,onClick:this.closeModal},r.a.createElement("div",{className:"modal-dialog-div",style:a,onClick:this.onDialogClick},r.a.createElement(k.a,{name:"window close outline",size:"large",className:"modal-close-div",onClick:this.closeModal}),this.props.children)))}}]),t}(n.Component)),Xe=function(e){function t(){return Object(h.a)(this,t),Object(m.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(p.a)(t,[{key:"componentWillMount",value:function(){this.props.isAuthenticated&&this.props.handleClose()}},{key:"render",value:function(){var e=this.props,t=e.isAuthenticated,a=e.isLoading,n=e.error,i=e.handleRegister,s=e.showLogin,o=e.handleClose;return t?null:r.a.createElement(Ke,{onClose:o},r.a.createElement(Je,{handleRegister:i,showLogin:s,isLoading:a,error:n}))}}]),t}(n.Component),Ye=Object(o.b)(function(e){return{isAuthenticated:e.auth.isAuthenticated,error:e.register.error,isLoading:e.register.isLoading}},function(e){return{handleRegister:function(t){e(Se(t))},handleClose:function(){e({type:"HIDE_MODAL"}),e({type:"REGISTER_RESET"})},showLogin:function(){e(me("LOGIN",{})),e({type:"REGISTER_RESET"})}}})(Xe),Ze=(a(428),function(e){function t(e){var a;return Object(h.a)(this,t),(a=Object(m.a)(this,Object(f.a)(t).call(this,e))).handleChange=function(e,t){var n=t.name,r=t.value;a.setState(Object(We.a)({},n,r))},a.isFormValid=function(){var e=a.state,t=e.username,n=e.password,r=!0;return t&&n||(r=!1),r},a.handleSubmit=function(e){a.isFormValid()&&a.props.handleLogin(a.state.username,a.state.password)},a.state={username:"",password:""},a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this.props,t=e.isLoading,a=e.error,n=e.showRegister,i=r.a.createElement(qe,{error:a,errorMessage:a||"Logging In Error",loading:t,loadingMessage:"Logging in",type:"modal"});return r.a.createElement("div",null,r.a.createElement(Ge.a,{attached:!0,header:"Log In"}),i,r.a.createElement(Be.a,{className:"attached fluid segment"},r.a.createElement(Be.a.Input,{required:!0,label:"Username",placeholder:"Username",type:"text",name:"username",value:this.state.username,onChange:this.handleChange}),r.a.createElement(Be.a.Input,{required:!0,label:"Password",type:"password",name:"password",value:this.state.password,onChange:this.handleChange}),r.a.createElement(E.a,{color:"blue",loading:t,disabled:t,onClick:this.handleSubmit},"Login")),r.a.createElement(Ge.a,{attached:"bottom",warning:!0},r.a.createElement(k.a,{name:"help"}),"New to this site?\xa0",r.a.createElement("a",{className:"login-register",onClick:n},"Sign up here"),"\xa0instead."))}}]),t}(n.Component)),$e=function(e){function t(){return Object(h.a)(this,t),Object(m.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(p.a)(t,[{key:"componentWillMount",value:function(){this.props.isAuthenticated&&this.props.handleClose()}},{key:"render",value:function(){var e=this.props,t=e.isAuthenticated,a=e.isLoading,n=e.error,i=e.handleClose,s=e.showRegister,o=e.handleLogin;return t?null:r.a.createElement(Ke,{onClose:i},r.a.createElement(Ze,{handleLogin:o,showRegister:s,isLoading:a,error:n}))}}]),t}(n.Component),et=Object(o.b)(function(e){return{isLoading:e.auth.isLoading,error:e.auth.error,isAuthenticated:e.auth.isAuthenticated}},function(e){return{handleLogin:function(t,a){e(ge(t,a))},handleClose:function(){e({type:"HIDE_MODAL"}),e({type:"LOGIN_RESET"})},showRegister:function(){e(me("REGISTER",{})),e({type:"LOGIN_RESET"})}}})($e),tt=a(279),at=a(588),nt=a(580),rt=(a(429),function(e){function t(e){var a;Object(h.a)(this,t),(a=Object(m.a)(this,Object(f.a)(t).call(this,e))).handleChange=function(e,t){var n=t.name,r=t.value;a.setState(Object(We.a)({},n,r))},a.onImageDrop=function(e){a.setState({avatarFile:e[0]})},a.editProfile=function(){var e={name:a.state.name,current_password:a.state.currentPassword,new_password:a.state.newPassword,about:a.state.about};a.props.handleEdit(e),a.setState({currentPassword:""})},a.handleSubmit=function(){var e=a.state,t=e.currentPassword,n=e.avatarFile;""!==t&&(n?(a.setState({avatarUploading:!0}),pe(n).then(function(e){a.setState({avatar:e.data.avatar_url,avatarUploading:!1}),a.editProfile()}).catch(function(e){console.log(e),a.setState({avatarError:"Image Upload Error",avatarFile:null,avatarUploading:!1})})):a.editProfile())};var n=a.props,r=n.name,i=n.avatar;return a.state={name:r,newPassword:"",currentPassword:"",about:"",avatar:i,avatarFile:null,avatarError:null,avatarUploading:!1},a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this.props,t=e.isLoading,a=e.error,n=e.success,i=this.state,s=i.name,o=i.newPassword,c=i.currentPassword,l=i.about,u=i.avatar,d=i.avatarFile,h=i.avatarError,p=i.avatarUploading,m=r.a.createElement(qe,{error:a||h,errorMessage:a||h,loading:t||p,loadingMessage:"Editing your profile",success:n,successMessage:"Your profile edit was successful",type:"modal"}),f=d?d.preview:u;return r.a.createElement("div",null,r.a.createElement(Ge.a,{attached:!0,header:"Edit Your Profile",content:"Fill out any part of the form below to edit your profile"}),m,r.a.createElement(Be.a,{className:"attached segment"},r.a.createElement(at.a,{celled:!0,columns:2},r.a.createElement(at.a.Column,null,r.a.createElement(Be.a.Field,null,r.a.createElement("label",null,"Profile picture"),r.a.createElement(tt.a,{onDrop:this.onImageDrop,multiple:!1,accept:"image/*"},r.a.createElement(C.a,{src:f,className:"editProfile-avatar"}))),r.a.createElement(Be.a.Input,{label:"About",placeholder:"Info",type:"text",name:"about",control:nt.a,value:l,onChange:this.handleChange})),r.a.createElement(at.a.Column,null,r.a.createElement(Be.a.Input,{label:"Name",placeholder:"Name",type:"text",name:"name",value:s,onChange:this.handleChange}),r.a.createElement(Be.a.Input,{required:!0,label:"Current Password",type:"password",name:"currentPassword",value:c,onChange:this.handleChange}),r.a.createElement(Be.a.Input,{label:"New Password",type:"password",name:"newPassword",value:o,onChange:this.handleChange}))),r.a.createElement(E.a,{color:"blue",loading:t,disabled:t,onClick:this.handleSubmit},"Submit")))}}]),t}(n.Component)),it=function(e){function t(){return Object(h.a)(this,t),Object(m.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(p.a)(t,[{key:"componentWillMount",value:function(){this.props.isAuthenticated||this.props.handleClose()}},{key:"render",value:function(){var e=this.props,t=e.isAuthenticated,a=e.isEditing,n=e.error,i=e.avatar,s=e.name,o=e.editProfile,c=e.handleClose,l=e.success;return t?r.a.createElement(Ke,{onClose:c,dialogStyle:{minWidth:"500px"}},r.a.createElement(rt,{avatar:i,name:s,handleEdit:o,isLoading:a,error:n,success:l})):null}}]),t}(n.Component),st=Object(o.b)(function(e){return{isAuthenticated:e.auth.isAuthenticated,isEditing:e.auth.isEditing,error:e.auth.editError,avatar:e.auth.avatar,name:e.auth.name,success:e.auth.editSuccess}},function(e){return{editProfile:function(t){e(ye(t))},handleClose:function(){e({type:"HIDE_MODAL"}),e({type:"EDIT_PROFILE_RESET"})}}})(it),ot=Object(o.b)(function(e){return{modalType:e.modal.modalType,modalProps:e.modal.modalProps}})(function(e){switch(e.modalType){case"REGISTER":return r.a.createElement(Ye,null);case"LOGIN":return r.a.createElement(et,null);case"EDIT_PROFILE":return r.a.createElement(st,null);default:return null}}),ct=a(20),lt=a(586),ut=function(e){function t(){return Object(h.a)(this,t),Object(m.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(p.a)(t,[{key:"componentWillMount",value:function(){this.props.isAuthenticated&&this.props.handleClose()}},{key:"render",value:function(){var e=this.props,t=e.isAuthenticated,a=e.isLoading,n=e.error,i=e.handleRegister,s=e.showLogInPage,o=e.from;return t?r.a.createElement(lt.a,{to:o}):r.a.createElement(Je,{handleRegister:i,showLogin:s,isLoading:a,error:n})}}]),t}(n.Component),dt=Object(o.b)(function(e){return{isAuthenticated:e.auth.isAuthenticated,error:e.register.error,isLoading:e.register.isLoading}},function(e){return{handleRegister:function(t){e(Se(t))}}})(ut),ht=function(e){function t(){return Object(h.a)(this,t),Object(m.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this.props,t=e.isAuthenticated,a=e.isLoading,n=e.error,i=e.showRegisterPage,s=e.handleLogin,o=e.from;return t?r.a.createElement(lt.a,{to:o}):r.a.createElement(Ze,{handleLogin:s,showRegister:i,isLoading:a,error:n})}}]),t}(n.Component),pt=Object(o.b)(function(e){return{isLoading:e.auth.isLoading,error:e.auth.error,isAuthenticated:e.auth.isAuthenticated}},function(e){return{handleLogin:function(t,a){e(ge(t,a))}}})(ht),mt=function(e){function t(e){var a;return Object(h.a)(this,t),(a=Object(m.a)(this,Object(f.a)(t).call(this,e))).showLogInPage=function(){a.setState({userIsRegistered:!0})},a.showRegisterPage=function(){a.setState({userIsRegistered:!1})},a.showLogInPage=a.showLogInPage.bind(Object(ct.a)(Object(ct.a)(a))),a.showRegisterPage=a.showRegisterPage.bind(Object(ct.a)(Object(ct.a)(a))),a.state={userIsRegistered:!0},a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=(this.props.location.state||{from:{pathname:"/"}}).from;return this.state.userIsRegistered?r.a.createElement(pt,{showRegisterPage:this.showRegisterPage,from:e}):r.a.createElement(dt,{showLogInPage:this.showLogInPage,from:e})}}]),t}(n.Component),ft=(a(430),a(33)),gt=(a(431),a(126)),vt=a.n(gt),bt=function(e){var t=[],a=[],n=!0,r=!1,i=void 0;try{for(var s,o=e[Symbol.iterator]();!(n=(s=o.next()).done);n=!0){var c=s.value,l=new Image;l.crossOrigin="anonymous",l.src=c.includes("base64")?c:c+"?"+performance.now(),t.push(l),a.push(Et(l))}}catch(h){r=!0,i=h}finally{try{n||null==o.return||o.return()}finally{if(r)throw i}}var u=0,d=0;return Promise.all(a).then(function(){u=Math.max.apply(Math,t.map(function(e){return e.width})),d=Math.max.apply(Math,t.map(function(e){return e.height}));var e=document.createElement("canvas");e.width=u,e.height=d;for(var a=e.getContext("2d"),n=0,r=t;n<r.length;n++){var i=r[n];a.drawImage(i,0,0)}var s=e.toDataURL();return{width:u,height:d,url:s}}).catch(function(e){return console.error(e)})};function Et(e){return new Promise(function(t,a){e.addEventListener("load",function(){return t()}),e.addEventListener("error",function(e){return a(e)})})}var Ot=function(e){function t(e){var a;return Object(h.a)(this,t),(a=Object(m.a)(this,Object(f.a)(t).call(this,e))).state={canvasDataURLs:[],widths:[],heights:[],nImagesComposed:0},a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){for(var e=this,t=this.props.pictureselfs,a=function(a){bt(t[a].image_urls).then(function(t){e.setState(function(e){var n=Object(ft.a)(e.canvasDataURLs),r=Object(ft.a)(e.widths),i=Object(ft.a)(e.heights);return n[a]=t.url,r[a]=t.width,i[a]=t.height,{canvasDataURLs:n,widths:r,heights:i,imagesComposed:e.imagesComposed+1}})}).catch(function(e){alert(e)})},n=0;n<t.length;++n)a(n)}},{key:"render",value:function(){for(var e=this.props,t=e.pictureselfs,a=e.columnWidth,n=e.channel,i=this.state,s=i.canvasDataURLs,o=i.widths,c=i.heights,l=i.nImagesComposed,u={},d=0;d<t.length;++d)void 0!==o[d]&&(u[t[d].id]=o[d]>a?c[d]*(a/o[d]):c[d]+(a-o[d]));for(var h=[],p=0;p<t.length;++p){var m=s[p];if(void 0!==m){var f=t[p];h.push(r.a.createElement("div",{key:f.id.toString()},r.a.createElement(b.a,{to:"/p/".concat(f.id.toString(),"/")},r.a.createElement("div",{style:{width:a.toString()+"px","box-shadow":"0px "+u[f.id].toString()+"px inset rgba(175,175,175,0.075)"}},r.a.createElement("img",{src:m,alt:f.title,style:{"max-width":"100%",height:"auto",margin:a>o[p]?(a-o[p])/2:"0px","z-index":"-1",position:"relative"}}))),r.a.createElement(b.a,{to:"/p/".concat(f.id.toString(),"/")},r.a.createElement("p",{title:f.title,className:"gallery title",style:{width:a-10+"px","margin-left":"5px"}},f.title)),n?null:r.a.createElement(b.a,{to:"/".concat(f.username,"/")},r.a.createElement("p",{title:f.name,className:"gallery channel",style:{width:a-10+"px","margin-left":"5px"}},f.name))))}}var g=l===t.length;return r.a.createElement("div",null,r.a.createElement("br",null),r.a.createElement(vt.a,{monitorImagesLoaded:!0,columnWidth:this.props.columnWidth,gutterWidth:this.props.gutterWidth,gutterHeight:this.props.gutterHeight+5,duration:0},h),r.a.createElement("div",{style:{"margin-top":"35px",visibility:g?"visible":"hidden"}},r.a.createElement(Qe,null)))}}]),t}(n.Component),yt=a(127),_t=a.n(yt),jt=function(e){function t(e){var a;return Object(h.a)(this,t),(a=Object(m.a)(this,Object(f.a)(t).call(this,e)))._isMounted=!1,a.fetchPictureselfsUserApi=function(e){return F.a.get(A+"user/"+e+"/pictureselfs/",he())},a.fetchPictureselfsUser=function(){a.fetchPictureselfsUserApi(a.props.username).then(function(e){a._isMounted&&a.setState({pictureselfs:e.data,isLoading:!1})}).catch(function(e){var t=fe(e);alert(t)})},a.toggleSubscribeApi=function(e){return F.a.get(A+"user/"+e+"/toggle-subscription/",he())},a.toggleSubscribe=function(){if(de.getState().auth.isAuthenticated)a.setState({numberOfSubscribers:a.state.isSubscribed?a.state.numberOfSubscribers-1:a.state.numberOfSubscribers+1}),a.setState({isSubscribed:!a.state.isSubscribed}),a.toggleSubscribeApi(a.props.username);else{var e=a.props.location;e.pathname="/"+a.props.match.params.username+"/subscribe",a.props.history.push({pathname:"/login",state:{from:e}})}},a.redirectToCustomize=function(){a.state.pictureselfs.length>0&&a.props.history.push({pathname:"/p/"+a.state.pictureselfs[0].id.toString()+"/customize/"})},a.state={pictureselfs:[],isSubscribed:a.props.isSubscribed,numberOfSubscribers:a.props.numberOfSubscribers,isLoading:!0},a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this._isMounted=!0,this.fetchPictureselfsUser(),this.props.location.pathname=="/"+this.props.match.params.username+"/subscribe"&&(this.props.location.pathname="/"+this.props.match.params.username,this.toggleSubscribe())}},{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"render",value:function(){if(this.state.isLoading)return r.a.createElement("div",{style:{"margin-top":"35px"}},r.a.createElement(Qe,null));var e=this.props,t=e.name,a=e.username,n=e.about,i=e.isCustomizable,s=de.getState().auth.username==a?null:r.a.createElement(E.a,{basic:!0,onClick:this.toggleSubscribe,content:this.state.isSubscribed?"SUBSCRIBED"+(0==this.state.numberOfSubscribers?"":"   "+this.state.numberOfSubscribers):"SUBSCRIBE"+(0==this.state.numberOfSubscribers?"":"   "+this.state.numberOfSubscribers),size:"small",compact:!0,style:{color:"rgb(155,155,155)","margin-bottom":"10px","font-weight":"bold"}}),o=""==this.props.avatar?"https://afcm.ca/wp-content/uploads/2018/06/no-photo.png":this.props.avatar,c=i?r.a.createElement(E.a,{basic:!0,size:"small",compact:!0,style:{backgroundColor:"transparent","font-weight":"bold","margin-bottom":"10px"},onClick:this.redirectToCustomize},"CUSTOMIZE"):null;return r.a.createElement("div",null,r.a.createElement("div",{className:"profileContainer"},r.a.createElement("div",null,r.a.createElement(S,{className:"profileAvatar",avatar:o,centered:!1})),r.a.createElement("div",{className:"profileInfo",style:{"white-space":"pre"}},r.a.createElement("div",{className:"name"},t),s,c,r.a.createElement("div",{className:"about"},r.a.createElement(_t.a,{tagName:"p"},n)))),r.a.createElement("br",null),r.a.createElement(Ot,{columnWidth:200,gutterWidth:10,gutterHeight:20,pictureselfs:this.state.pictureselfs,channel:!0,duration:0}))}}]),t}(n.Component),Ct=(a(501),function(e){function t(){return Object(h.a)(this,t),Object(m.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.match.params.username;this.props.fetchUserProfile(e)}},{key:"componentWillReceiveProps",value:function(e){var t=this.props.match.params.username,a=e.match.params.username;t!==a&&this.props.fetchUserProfile(a)}},{key:"render",value:function(){var e=this.props,t=e.isLoading,a=e.error,n=e.profile,i=e.location,s=e.match,o=e.history;if(a||!n||t)return r.a.createElement(qe,{error:a||!n,errorClassName:"userProfile-error",errorMessage:a,loading:t,loadingMessage:"",type:"default"});var c=n.name,l=n.username,u=n.about,d=n.avatar,h=n.date_joined,p=n.is_subscribed,m=n.number_of_subscribers,f=n.is_customizable;return r.a.createElement(jt,{username:l,name:c,avatar:d,about:u,dateJoined:h,isSubscribed:p,numberOfSubscribers:m,isCustomizable:f,location:i,match:s,history:o})}}]),t}(n.Component)),St=Object(o.b)(function(e){return{isLoading:e.userProfile.isLoading,profile:e.userProfile.profile,error:e.userProfile.error}},function(e){return{fetchUserProfile:function(t){e(Le(t))}}})(Ct),wt=(a(502),function(e){function t(){return Object(h.a)(this,t),Object(m.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this.props,t=e.name,a=e.username,n=e.avatar;return r.a.createElement("div",{className:"user-card"},r.a.createElement(b.a,{to:"/".concat(a)},r.a.createElement("img",{src:n,className:"user-card-avatar",alt:a})),r.a.createElement(b.a,{to:"/".concat(a)},r.a.createElement("p",{className:"user-card-name"},t)),r.a.createElement(b.a,{to:"/".concat(a)},r.a.createElement("p",{className:"user-card-username"},"@",a)))}}]),t}(n.Component)),kt=(a(503),function(e){function t(){return Object(h.a)(this,t),Object(m.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this.props,t=e.isLoading,a=e.error,n=e.users;if(a||!n||t||0===n.length)return r.a.createElement(qe,{error:a||!n,errorClassName:"users-error",errorMessage:a,loading:t,loadingMessage:"We are fetching the users for you",nothing:n&&0===n.length,nothingMessage:"No user to display",nothingClassName:"users-error",type:"default"});var i=n.map(function(e){var t=e.name,a=e.username,n=e.avatar;return r.a.createElement("div",{key:a,className:"userCard"},r.a.createElement(wt,{username:a,name:t,avatar:n}))});return r.a.createElement("div",{className:"usersContainer"},i)}}]),t}(n.Component)),It=function(e){function t(){return Object(h.a)(this,t),Object(m.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.props.fetchUsers()}},{key:"render",value:function(){return r.a.createElement(kt,this.props)}}]),t}(n.Component),Lt=Object(o.b)(function(e){return{isLoading:e.users.isLoading,users:e.users.users,error:e.users.error}},function(e){return{fetchUsers:function(){e(Ae())}}})(It),Pt=(a(504),function(e){function t(){return Object(h.a)(this,t),Object(m.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("div",{className:"not-found-page"},r.a.createElement("p",null,"This page isn't available.")))}}]),t}(n.Component)),xt=a(128),Ft=a(579),At=a(583),Rt=a(587),Ut=(a(505),function(e){function t(e){var a;return Object(h.a)(this,t),(a=Object(m.a)(this,Object(f.a)(t).call(this,e))).hoverOn=function(){a.setState({hover:!0})},a.hoverOff=function(){a.setState({hover:!1})},a.hoverOn=a.hoverOn.bind(Object(ct.a)(Object(ct.a)(a))),a.hoverOff=a.hoverOff.bind(Object(ct.a)(Object(ct.a)(a))),a.state={hover:!1},a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e,t=this;return this.props.insert&&(e=r.a.createElement(r.a.Fragment,null,r.a.createElement(E.a,{as:"label",style:{backgroundColor:"transparent","margin-left":0,"margin-right":"35px"},icon:"add",size:"large",htmlFor:"hiddenFileInputf"+this.props.feature_index.toString()+"j"+this.props.variant_index.toString()}),r.a.createElement("input",{hidden:!0,id:"hiddenFileInputf"+this.props.feature_index.toString()+"j"+this.props.variant_index.toString(),type:"file",onChange:function(e){return t.props.insertVariant(t.props.feature_index,t.props.variant_index,e.target.files)}}))),r.a.createElement(r.a.Fragment,null,e,r.a.createElement("div",{class:"variant-container",onMouseEnter:this.hoverOn,onMouseLeave:this.hoverOff},r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement(E.a,{style:{backgroundColor:"transparent",margin:0,visibility:"hidden"},icon:"file image"})),r.a.createElement("div",null,r.a.createElement("img",{src:this.props.variant_url,alt:this.props.variant_name,style:{margin:0}})),r.a.createElement("div",null,r.a.createElement(E.a,{style:{backgroundColor:"transparent",margin:0,visibility:"hidden"},icon:"delete"}))),r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement(E.a,{style:{backgroundColor:"transparent",margin:0,visibility:this.state.hover?"visible":"hidden"},icon:"delete",onClick:function(){return t.props.removeVariant(t.props.feature_index,t.props.variant_index,t.props.variant_id)}})),r.a.createElement("div",null,r.a.createElement(E.a,{as:"label",style:{backgroundColor:"transparent",margin:0,visibility:this.state.hover?"visible":"hidden"},icon:"file image",htmlFor:"hiddenFileInputf"+this.props.feature_index.toString()+"v"+this.props.variant_index.toString()}),r.a.createElement("input",{hidden:!0,id:"hiddenFileInputf"+this.props.feature_index.toString()+"v"+this.props.variant_index.toString(),type:"file",onChange:function(e){return t.props.updateVariant(t.props.variant_id,e.target.files)}}))),r.a.createElement("div",null)))}}]),t}(n.Component)),Dt=function(e){function t(e){var a;return Object(h.a)(this,t),(a=Object(m.a)(this,Object(f.a)(t).call(this,e))).showImportFeatureDropdown=function(){return a.setState(function(e){return{importFeature:!e.importFeature}})},a.hoverOn=function(){a.setState({hover:!0})},a.hoverOff=function(){a.setState({hover:!1})},a.handleDismiss=function(){a.setState({importedFeatureMessage:!1})},a.handleFeatureImportDropdownChange=function(e,t){a.setState({feature_to_include:t.value,includeFeature:"create_new"!==t.value})},a.handleChange=function(e,t){t.name;var n=t.value;a.props.imported?(a.setState({importedFeatureMessage:!0}),setTimeout(function(){a.setState({importedFeatureMessage:!1})},9e3)):a.props.updateFeature(a.props.feature_id,n)},a.importVariantsCheckboxHandleChange=function(){return a.setState(function(e){return{importVariantsIsChecked:!e.importVariantsIsChecked}})},a.showInsertPositions=function(){return a.setState(function(e){return{insertChecked:!e.insertChecked}})},a.hoverOn=a.hoverOn.bind(Object(ct.a)(Object(ct.a)(a))),a.hoverOff=a.hoverOff.bind(Object(ct.a)(Object(ct.a)(a))),a.importVariantsCheckboxHandleChange=a.importVariantsCheckboxHandleChange.bind(Object(ct.a)(Object(ct.a)(a))),a.handleFeatureImportDropdownChange=a.handleFeatureImportDropdownChange.bind(Object(ct.a)(Object(ct.a)(a))),a.handleInsertButtonClick=a.handleInsertButtonClick.bind(Object(ct.a)(Object(ct.a)(a))),a.state={insertChecked:!1,hover:!1,feature_to_include:"create_new",importedFeatureMessage:!1,importVariantsIsChecked:!1},a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"handleInsertButtonClick",value:function(){this.props.insertFeature(this.props.feature_index,this.state.feature_to_include,this.state.importVariantsIsChecked),this.setState({feature_to_include:"create_new",includeFeature:!1})}},{key:"render",value:function(){var e,t=this,a=[],n={key:"create_new",text:"(create new)",value:"create_new"};a.push(n);for(var i=0,s=Object.entries(this.props.features_to_include);i<s.length;i++){var o=s[i],c=Object(xt.a)(o,2),l=c[0],u=c[1],d={};d.key=l,d.text=u,d.value=l,a.push(d)}var h,p=this.state.feature_to_include;this.props.insert&&(e=r.a.createElement(r.a.Fragment,null,r.a.createElement(E.a,{basic:!0,content:"Add feature",onClick:function(){return t.handleInsertButtonClick()},style:{"margin-bottom":"20px"}}),r.a.createElement(w.a,{onChange:function(e,a){return t.handleFeatureImportDropdownChange(e,a)},options:a,placeholder:"Choose feature to import",defaultValue:"create_new",selection:!0,value:p,style:{visibility:0===Object.keys(this.props.features_to_include).length?"hidden":"visible"}}),r.a.createElement(Ft.a,{label:"Import variants",style:{"margin-left":"5px",visibility:"create_new"===this.state.feature_to_include?"hidden":"visible"},checked:this.state.importVariantsIsChecked,onChange:this.importVariantsCheckboxHandleChange}))),this.props.variant_order.length&&(h=r.a.createElement("div",null,r.a.createElement(Ft.a,{slider:!0,label:"Insert variant",style:{"margin-bottom":"0px"},checked:this.state.insertChecked,onChange:this.showInsertPositions}),r.a.createElement("br",null),r.a.createElement("br",null)));var m,f,g=this.props.variant_order.map(function(e,a){return r.a.createElement(Ut,{key:e,variant_index:a,feature_index:t.props.feature_index,insert:t.state.insertChecked,updateVariant:t.props.updateVariant,insertVariant:t.props.insertVariant,removeVariant:t.props.removeVariant,variant_name:t.props.variant_names[e],variant_id:e,variant_url:t.props.variant_urls[e],variant_file:t.props.variant_files[e],hover:t.state.hover})});return this.state.importedFeatureMessage&&(m=r.a.createElement(r.a.Fragment,null,r.a.createElement(Ge.a,{compact:!0,onDismiss:this.handleDismiss,header:"The feature is included!",content:"Title of included feature can only be formatted in the edit menu of pictureself it's originated from."}),r.a.createElement("br",null)," ",r.a.createElement("br",null))),f=this.props.variantsAreImported?r.a.createElement(Ft.a,{label:"Import variants",style:{"margin-bottom":"20px"},checked:!0,disabled:!0}):r.a.createElement(r.a.Fragment,null," ",h,r.a.createElement("div",{id:"main"},g," ",r.a.createElement(O.a,{position:"bottom center",mouseEnterDelay:750,trigger:r.a.createElement("div",{class:0===this.props.variant_order.length?"initialAddButtonDiv":""},r.a.createElement(E.a,{as:"label",style:{backgroundColor:"transparent",margin:0},icon:"add",size:"large",htmlFor:"hiddenFileInput"+this.props.feature_index.toString()}),r.a.createElement("input",{hidden:!0,id:"hiddenFileInput"+this.props.feature_index.toString(),type:"file",accept:"image/*",multiple:!0,onChange:function(e){return t.props.addVariants(t.props.feature_index,e.target.files)},onClick:function(e){e.target.value=null}})),content:"Add variant",size:"large",style:{borderRadius:3,opacity:.8,"padding-top":"0.25em","padding-bottom":"0.25em","padding-left":"0.5em","padding-right":"0.5em"},inverted:!0,basic:!0}))),r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement("br",null),r.a.createElement(Be.a,{onMouseEnter:this.hoverOn,onMouseLeave:this.hoverOff},r.a.createElement(Be.a.Group,null,r.a.createElement(Be.a.Input,{width:"11",size:"large",type:"text",name:"title",value:this.props.title,placeholder:"Feature Title",onChange:this.handleChange}),r.a.createElement(Be.a.Button,{class:"btn",style:{backgroundColor:"transparent",visibility:this.state.hover?"visible":"hidden"},icon:"delete",size:"huge",onClick:function(){return t.props.remove_feature(t.props.feature_index,t.props.feature_id)}}))),m,f),e)}}]),t}(n.Component),Vt=function(e){function t(e){var a;return Object(h.a)(this,t),(a=Object(m.a)(this,Object(f.a)(t).call(this,e))).fetchPictureselfApi=function(e){return F.a.get(A+"p/"+e+"/data/",he())},a.fetchFeaturesToIncludeApi=function(e){return F.a.get(A+"p/"+e+"/features-to-include/",he())},a.deletePictureselfApi=function(e){return F.a.delete(A+"p/"+e+"/delete/",he())},a.editVariantApi=function(e,t){var a=new FormData;a.set("file",t);var n={headers:{Authorization:he().headers.Authorization,"content-type":"multipart/form-data"}};return F.a.put(A+"variants/"+e+"/edit/",a,n)},a.createVariantApi=function(e){var t=new FormData;t.set("file",e);var a={headers:{Authorization:he().headers.Authorization,"content-type":"multipart/form-data"}};return F.a.post(A+"variants/create/",t,a)},a.editPictureselfInfoApi=function(e,t){for(var n=new FormData,r=0,i=Object.entries(t);r<i.length;r++){var s=i[r],o=Object(xt.a)(s,2),c=o[0],l=o[1];n.append(c,l)}var u={headers:{Authorization:he().headers.Authorization,"content-type":"multipart/form-data"}};return"0"===a.state.pictureself_id?F.a.post(A+"p/"+e+"/edit/",n,u):F.a.put(A+"p/"+e+"/edit/",n,u)},a.fetchPictureself=function(){var e=a.state.pictureself_id;a.fetchPictureselfApi(e).then(function(e){for(var t=e.data.variants,n=t.length,r={},i={},s=0;s<n;s++)r[t[s].id.toString()]=t[s].image,i[t[s].id.toString()]=t[s].original_name;for(var o=JSON.parse(e.data.feature_ids_json),c=JSON.parse(e.data.variant_ids_json),l=[],u=[],d=o.length,h=c.length,p=0;p<d;p++)l.push(o[p].toString());for(var m=0;m<h;m++){u.push([]);for(var f=c[m],g=f.length,v=0;v<g;v++)u[m].push(f[v].toString())}for(var b={},E=e.data.features,O=E.length,y=0;y<O;y++)b[E[y].id.toString()]=E[y].title;a.setState({pictureself_title:e.data.title,initial_pictureself_title:e.data.title,pictureself_description:e.data.description,channel_username:e.data.username,feature_order:l,variant_order:u,features:b,variant_urls:r,variant_names:i})}).catch(function(e){var t=fe(e);alert(e),alert(t)})},a.getNewFiles=function(){for(var e=Object.keys(a.state.variant_files),t=[],n=[],r=0;r<e.length;++r)"v"==e[r][0]?t.push(e[r]):n.push(e[r]);return{created_variant_ids:t,edited_variant_ids:n,variant_files:a.state.variant_files}},a.getNewInfo=function(){for(var e=a.state.feature_order.slice(),t=e.length,n=0;n<t;n++)e[n].indexOf("i")>-1&&(e[n]=e[n].substring(0,e[n].indexOf("i")));return{title:a.state.pictureself_title,description:a.state.pictureself_description,feature_order:JSON.stringify(e),variant_order:JSON.stringify(a.state.variant_order),features:JSON.stringify(a.state.features)}},a.showImportFeatureDropdown=function(){return a.setState(function(e){return{importFeature:!e.importFeature}})},a.importVariantsCheckboxHandleChange=function(){return a.setState(function(e){return{importVariantsIsChecked:!e.importVariantsIsChecked}})},a.showInsertPositions=function(){return a.setState(function(e){return{insertChecked:!e.insertChecked}})},a.handlePictureselfTitleChange=function(e){a.setState({pictureself_title:e.target.value})},a.handlePictureselfDescriptionChange=function(e){a.setState({pictureself_description:e.target.value})},a.updateFeature=function(e,t){var n=Object(z.a)({},a.state.features),r=Object(z.a)({},n[e]);r=t,n[e]=r,a.setState({features:n})},a.insertFeature=function(e,t,n){if("create_new"===t){var r=Object(z.a)({},a.state.features),i="f"+a.state.nfc.toString(),s={new_id:""};r[i]="",a.setState({features:Object(z.a)({},r,s)});var o=a.state.nfc+1;a.setState({nfc:o});var c=a.state.feature_order.slice();c.splice(e,0,i),a.setState({feature_order:c});var l=a.state.variant_order.slice();l.splice(e,0,[]),a.setState({variant_order:l})}else{var u=t+"i"+a.state.nfc.toString();if(e===a.state.feature_order.length)a.setState({feature_order:[].concat(Object(ft.a)(a.state.feature_order),[u])}),a.setState({variant_order:[].concat(Object(ft.a)(a.state.variant_order),[[]])});else{var d=a.state.feature_order.slice();d.splice(e,0,u),a.setState({feature_order:d});var h=a.state.variant_order.slice();h.splice(e,0,[]),a.setState({variant_order:h})}n&&a.setState({features_with_imported_variants:[].concat(Object(ft.a)(a.state.features_with_imported_variants),[u])});var p=a.state.nfc+1;a.setState({nfc:p}),a.setState({feature_to_include:"create_new",includeFeature:!1})}},a.removeFeature=function(e,t){var n=Object(z.a)({},a.state.features);delete n[t],a.setState({features:Object(z.a)({},n)});var r=a.state.feature_order.slice();r.splice(e,1),a.setState({feature_order:r});var i=a.state.variant_order.slice();i.splice(e,1),a.setState({variant_order:i})},a.addFeature=function(){var e=Object(z.a)({},a.state.features),t="f"+a.state.nfc.toString(),n={new_id:""};e[t]="",a.setState({features:Object(z.a)({},e,n)});var r=a.state.nfc+1;a.setState({nfc:r}),a.setState({feature_order:[].concat(Object(ft.a)(a.state.feature_order),[t])}),a.setState({variant_order:[].concat(Object(ft.a)(a.state.variant_order),[[]])})},a.updateVariant=function(e,t){var n=t[0],r=Object(z.a)({},a.state.variant_urls),i=Object(z.a)({},r[e]);i=window.URL.createObjectURL(n),r[e]=i,a.setState({variant_urls:r});var s=Object(z.a)({},a.state.variant_names),o=Object(z.a)({},s[e]);o=n.name,s[e]=o,a.setState({variant_names:s});var c=Object(z.a)({},a.state.variant_files),l=Object(z.a)({},c[e]);l=n,c[e]=l,a.setState({variant_files:c})},a.insertVariant=function(e,t,n){var r="v"+a.state.nvc.toString(),i=n[0],s=window.URL.createObjectURL(i),o=i.name;a.setState({variant_files:Object(z.a)({},a.state.variant_files,Object(We.a)({},r,i))}),a.setState({variant_names:Object(z.a)({},a.state.variant_names,Object(We.a)({},r,o))}),a.setState({variant_urls:Object(z.a)({},a.state.variant_urls,Object(We.a)({},r,s))});var c=a.state.nvc+1;a.setState({nvc:c});var l=a.state.variant_order.slice();l[e].splice(t,0,r),a.setState({variant_order:l})},a.removeVariant=function(e,t,n){var r=Object(z.a)({},a.state.variant_files),i=Object(z.a)({},a.state.variant_names),s=Object(z.a)({},a.state.variant_urls);delete r[n],delete i[n],delete s[n],a.setState({variant_files:Object(z.a)({},r)}),a.setState({variant_names:Object(z.a)({},i)}),a.setState({variant_urls:Object(z.a)({},s)});var o=a.state.variant_order.slice();o[e].splice(t,1),a.setState({variant_order:o})},a.addVariants=function(e,t){for(var n=t.length,r=[],i={},s={},o={},c="",l=0;l<n;++l)c="v"+(a.state.nvc+l).toString(),r.push(c),s[c]=t[l],i[c]=t[l].name,o[c]=window.URL.createObjectURL(t[l]);a.setState({variant_files:Object(z.a)({},a.state.variant_files,s)}),a.setState({variant_names:Object(z.a)({},a.state.variant_names,i)});var u=a.state.nvc+n;a.setState({nvc:u});var d=a.state.variant_order.slice();d[e]=[].concat(Object(ft.a)(d[e]),r),a.setState({variant_order:d}),a.setState({variant_urls:Object(z.a)({},a.state.variant_urls,o)})},a.atLeastOneVariant=function(){var e=a.state.variant_order;if(0==e.length)return!1;for(var t=0;t<e.length;t++)if(e[t].length>0)return!0},a.createVariants=function(e,t){for(var n=~~(e.length/5),r=Promise.resolve(),i=e.length%5,s=function(s){var o=s<n?5:i,c=e.slice(5*s,5*s+o),l={},u=!0,d=!1,h=void 0;try{for(var p,m=c[Symbol.iterator]();!(u=(p=m.next()).done);u=!0){var f=p.value;l[f]=t[f]}}catch(g){d=!0,h=g}finally{try{u||null==m.return||m.return()}finally{if(d)throw h}}r=(r=r.then(function(){return a.createVariantsChunk(c,l)})).then(function(){a.setState(function(e){return{legitCreatedVariantIds:e.legitCreatedVariantIds.concat(e.legitCreatedVariantIdsChunk),nFilesUploaded:e.nFilesUploaded+(s==n?i:5)}})})},o=0;o<n+1;++o)s(o);return r},a.createVariantsChunk=function(e,t){var n=Promise.resolve();return a.setState({legitCreatedVariantIdsChunk:[]},function(){for(var r=function(r){n=(n=n.then(function(){return a.createVariantApi(t[e[r]])})).then(function(e){a.setState(function(t){return{legitCreatedVariantIdsChunk:[].concat(Object(ft.a)(t.legitCreatedVariantIdsChunk),[e.data.new_variant_id])}})})},i=0;i<e.length;++i)r(i)}),n},a.editVariants=function(e,t){for(var n=~~(e.length/5),r=e.length%5,i=Promise.resolve(),s=function(s){var o=s<n?5:r,c=e.slice(5*s,5*s+o),l={},u=!0,d=!1,h=void 0;try{for(var p,m=c[Symbol.iterator]();!(u=(p=m.next()).done);u=!0){var f=p.value;l[f]=t[f]}}catch(g){d=!0,h=g}finally{try{u||null==m.return||m.return()}finally{if(d)throw h}}i=(i=i.then(function(){return a.editVariantsChunk(c,l)})).then(function(){a.setState(function(e){return{nFilesUploaded:e.nFilesUploaded+(s==n?r:5)}})})},o=0;o<n+1;++o)s(o);return i},a.editVariantsChunk=function(e,t){for(var n=Promise.resolve(),r=function(r){n=n.then(function(){return a.editVariantApi(e[r],t[e[r]])})},i=0;i<e.length;++i)r(i);return n},a.showErrorOnPost=function(e){a.setState({errorOnPost:e}),setTimeout(function(){a.setState({errorOnPost:""})},9e3)},a.editPictureself=function(){if(a.atLeastOneVariant()){a.setState({isUploading:!0});var e=a.getNewInfo(),t=a.getNewFiles(),n=a.state.pictureself_id;a.editVariants(t.edited_variant_ids,t.variant_files).then(function(r){a.createVariants(t.created_variant_ids,t.variant_files).then(function(r){var i=a.state.legitCreatedVariantIds;e.created_variant_ids=JSON.stringify(i);for(var s=0;s<i.length;++s)e.variant_order=e.variant_order.replace('"'+t.created_variant_ids[s].toString()+'"','"'+i[s].toString()+'"');a.editPictureselfInfoApi(n,e).then(function(e){var t="0"==a.state.pictureself_id?e.data.new_pictureself_id:a.state.pictureself_id;a.props.history.push("/p/"+t)})})}).catch(function(e){a.showPostError("An Error Occured, Please Try Again"),a.setState({nFilesUploaded:0,legitCreatedVariantIds:[],isUploading:!1})})}else a.showErrorOnPost("At Least 1 Variant Should Be Provided")},a.handleDeletePictureself=function(){var e=a.props.match.params.pictureself;"0"!==e?a.deletePictureselfApi(e).then(function(e){a.props.history.push("/"+a.state.channel_username)}).catch(function(e){a.setState({errorOnPost:"An Error Occured, Please Try Again"}),setTimeout(function(){a.setState({errorOnPost:""})},9e3)}):a.props.history.push("/"+a.state.channel_username)},a.deleteModalShow=function(){return a.setState({showDeleteModal:!0})},a.closeDeleteModal=function(){return a.setState({showDeleteModal:!1})},a.updateFeature=a.updateFeature.bind(Object(ct.a)(Object(ct.a)(a))),a.insertFeature=a.insertFeature.bind(Object(ct.a)(Object(ct.a)(a))),a.removeFeature=a.removeFeature.bind(Object(ct.a)(Object(ct.a)(a))),a.addFeature=a.addFeature.bind(Object(ct.a)(Object(ct.a)(a))),a.updateVariant=a.updateVariant.bind(Object(ct.a)(Object(ct.a)(a))),a.insertVariant=a.insertVariant.bind(Object(ct.a)(Object(ct.a)(a))),a.removeVariant=a.removeVariant.bind(Object(ct.a)(Object(ct.a)(a))),a.handleFeatureImportDropdownChange=a.handleFeatureImportDropdownChange.bind(Object(ct.a)(Object(ct.a)(a))),a.addVariants=a.addVariants.bind(Object(ct.a)(Object(ct.a)(a))),a.state={pictureself_id:a.props.match.params.pictureself,channel_username:"",pictureself_title:"",initial_pictureself_title:"",pictureself_description:"",features_to_include:{},features:{},feature_order:[],nfc:0,insertChecked:!1,feature_to_include:"create_new",features_with_imported_variants:[],importVariantsIsChecked:!1,variant_order:[],variant_urls:{},variant_names:{},variant_files:{},nvc:0,showDeleteModal:!1,errorOnPost:"",isUploading:!1,nFilesUploaded:0,legitCreatedVariantIds:[],legitCreatedVariantIdsChunk:[]},a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params.pictureself;this.setState({pictureself_id:t}),"0"!==t&&this.fetchPictureself(),this.fetchFeaturesToIncludeApi(t).then(function(t){e.setState({features_to_include:t.data})}).catch(function(e){var t=fe(e);alert(t)})}},{key:"handleFeatureImportDropdownChange",value:function(e,t){this.setState({feature_to_include:t.value,includeFeature:"create_new"!==t.value})}},{key:"render",value:function(){var e=this,t=this.state.feature_order.slice().reverse(),a=this.state.feature_order.length,n=[],i={key:"create_new",text:"(create new)",value:"create_new"};n.push(i);for(var s=0,o=Object.entries(this.state.features_to_include);s<o.length;s++){var c=o[s],l=Object(xt.a)(c,2),u=l[0],d=l[1];if(!this.state.feature_order.includes(u)){var h={};h.key=u,h.text=d,h.value=u,n.push(h)}}var p,m=t.map(function(t,n){return r.a.createElement(Dt,{key:t,feature_index:a-n-1,insert:e.state.insertChecked,updateFeature:e.updateFeature,insertFeature:e.insertFeature,remove_feature:e.removeFeature,title:t.indexOf("i")>-1?e.state.features_to_include[t.substring(0,t.indexOf("i"))]:e.state.features[t],feature_id:t,variant_order:e.state.variant_order[a-n-1],variant_names:e.state.variant_names,variant_urls:e.state.variant_urls,variant_files:e.state.variant_files,addVariants:e.addVariants,updateVariant:e.updateVariant,insertVariant:e.insertVariant,removeVariant:e.removeVariant,imported:t.indexOf("i")>-1,features_to_include:e.state.features_to_include,variantsAreImported:e.state.features_with_imported_variants.includes(t)})});this.state.feature_order.length>0&&(p=r.a.createElement(r.a.Fragment,null,r.a.createElement(Ft.a,{toggle:!0,size:"large",label:"Insert feature",style:{"margin-bottom":"0px"},checked:this.state.insertChecked,onChange:this.showInsertPositions}),r.a.createElement("br",null),r.a.createElement("br",null)));var f=this.state.feature_to_include,g=this.props.match.params.pictureself;return r.a.createElement("div",{style:{"margin-left":"35px","padding-bottom":"20px"}},r.a.createElement("p",{id:"editpictureself-header"},0==g?"Create New":"Edit ",r.a.createElement("b",null," ",0==g?"":this.state.initial_pictureself_title)),r.a.createElement(b.a,{to:"/help",target:"_blank"},r.a.createElement(k.a,{name:"question circle outline",style:{color:"dodgerBlue"}}),r.a.createElement("p",{id:"editpictureself-howitworks-link"},"How It Works")),r.a.createElement(Be.a,{style:{marginTop:"15px"}},r.a.createElement(Be.a.Input,{width:"11",size:"large",type:"text",name:"pictureself_title",placeholder:"Title",value:this.state.pictureself_title,onChange:function(t){return e.handlePictureselfTitleChange(t)}}),r.a.createElement(Be.a.TextArea,{width:"11",name:"pictureself_description",placeholder:"Comment",value:this.state.pictureself_description,onChange:function(t){return e.handlePictureselfDescriptionChange(t)}})),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(E.a,{content:"Add feature",onClick:"create_new"===this.state.feature_to_include?this.addFeature:function(){return e.insertFeature(a,f,e.state.importVariantsIsChecked)}})," ",r.a.createElement(w.a,{onChange:function(t,n){return e.handleFeatureImportDropdownChange(t,n,a)},options:n,placeholder:"Choose feature to import",defaultValue:"create_new",selection:!0,value:f,style:{visibility:0===Object.keys(this.state.features_to_include).length?"hidden":"visible"}}),r.a.createElement(Ft.a,{label:"Import variants",style:{"margin-left":"5px",visibility:"create_new"===f?"hidden":"visible"},checked:this.state.importVariantsIsChecked,onChange:this.importVariantsCheckboxHandleChange}),r.a.createElement("br",null),r.a.createElement("br",null),p,r.a.createElement("div",null,m),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("p",{className:"info-on-save"+(""!=this.state.errorOnPost?" error":"")},""!=this.state.errorOnPost?this.state.errorOnPost:this.state.isUploading?"Uploading... "+Math.max(~~(this.state.nFilesUploaded/Object.keys(this.state.variant_files).length*100)-1,1).toString()+"%":""),r.a.createElement(E.a,{floated:"left",size:"large",icon:!0,color:"red",basic:!0,onClick:this.deleteModalShow},r.a.createElement(k.a,{name:"trash alternate outline"}),"DELETE"),r.a.createElement(At.a,{open:this.state.showDeleteModal,size:"small",onClose:this.closeDeleteModal},r.a.createElement(Rt.a,{icon:"trash alternate outline",content:"Delete pictureself"}),r.a.createElement(At.a.Content,null,r.a.createElement("p",null,"Are you sure you want to delete this pictureself?")),r.a.createElement(At.a.Actions,null,r.a.createElement(E.a,{onClick:this.closeDeleteModal,color:"blue",inverted:!0},r.a.createElement(k.a,{name:"remove"})," Cancel"),r.a.createElement(E.a,{color:"red",onClick:function(){return e.handleDeletePictureself()},inverted:!0},r.a.createElement(k.a,{name:"checkmark"})," Delete"))),r.a.createElement(E.a,{floated:"right",content:"SAVE",primary:!0,size:"large",style:{"margin-right":"35px","margin-bottom":"35px"},loading:this.state.isUploading,onClick:0===g?function(){return e.createPictureself()}:function(){return e.editPictureself()}}))}}]),t}(n.Component),Nt=(a(558),function(e){function t(e){var a;return Object(h.a)(this,t),(a=Object(m.a)(this,Object(f.a)(t).call(this,e))).fetchPictureselfsIndexApi=function(){return F.a.get(A+"user/liked-pictureselfs/",he())},a.fetchPictureselfsIndex=function(){a.fetchPictureselfsIndexApi().then(function(e){a.setState({pictureselfs:e.data},function(){a.setState({isLoading:!1})})}).catch(function(e){fe(e)})},a.state={pictureselfs:[],isLoading:!0},a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.fetchPictureselfsIndex()}},{key:"render",value:function(){if(this.state.isLoading)return r.a.createElement("div",{style:{"margin-top":"35px"}},r.a.createElement(Qe,null));return r.a.createElement("div",null,r.a.createElement("p",{id:"likes-title"},"Likes"),r.a.createElement(Ot,{columnWidth:200,gutterWidth:10,gutterHeight:20,pictureselfs:this.state.pictureselfs}))}}]),t}(n.Component)),Tt=(a(559),function(e){function t(e){var a;return Object(h.a)(this,t),(a=Object(m.a)(this,Object(f.a)(t).call(this,e))).fetchChannels=function(){a.fetchChannelsApi().then(function(e){a.setState({channels:e.data},function(){a.setState({isLoading:!1})})}).catch(function(e){fe(e)})},a.fetchChannelsApi=function(){return F.a.get("http://127.0.0.1:8000/api/user/channels-subscribed-to/",he())},a.state={channels:[],isLoading:!0},a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.fetchChannels()}},{key:"render",value:function(){var e=this.state,t=e.isLoading,a=e.channels;if(t)return r.a.createElement("div",{style:{"margin-top":"35px"}},r.a.createElement(Qe,null));var n=a.map(function(e){var t=e.name,a=e.username,n=e.avatar;return r.a.createElement("div",{key:a,className:"userCard"},r.a.createElement(wt,{username:a,name:t,avatar:n}))});return r.a.createElement("div",null," ",r.a.createElement("p",{id:"subscription-list-title"},"Subscriptions"),r.a.createElement("div",{className:"usersContainer"}," ",n))}}]),t}(n.Component)),zt=a(280);function Mt(e){var t=e.component,a=Object(zt.a)(e,["component"]);return r.a.createElement(u.a,Object.assign({},a,{render:function(e){return de.getState().auth.isAuthenticated?r.a.createElement(t,e):r.a.createElement(lt.a,{to:{pathname:"/login",state:{from:e.location}}})}}))}var Ht=a(96),Wt=(a(560),function(e){function t(e){var a;return Object(h.a)(this,t),(a=Object(m.a)(this,Object(f.a)(t).call(this,e))).fetchPictureselfDisplayApi=function(e){return F.a.get(A+"p/"+e,he())},a.fetchPictureselfDisplay=function(){var e=a.state.id;a.fetchPictureselfDisplayApi(e).then(function(e){a.setState({title:e.data.title,imageUrls:e.data.image_urls,comment:e.data.description,username:e.data.username,name:e.data.name,isCustomizable:e.data.is_customizable,isLiked:e.data.is_liked,numberOfLikes:e.data.number_of_likes,date:e.data.timestamp,avatar:e.data.avatar},function(){bt(a.state.imageUrls).then(function(e){a.setState({width:e.width,height:e.height,canvasDataURL:e.url,isLoading:!1},function(){a.props.location.pathname=="/p/"+a.props.match.params.pictureself+"/like"&&a.toggleLike();var e=a.buttonsDiv.clientHeight;a.setState({buttonsDivHeight:e})})}).catch(function(e){alert(e)})})}).catch(function(e){var t=fe(e);alert(e),alert(t)})},a.toggleLikeApi=function(e){return F.a.get(A+"p/"+e+"/toggle-like/",he())},a.toggleLike=function(){if(de.getState().auth.isAuthenticated)a.setState({likePopupIsVisible:!1}),a.setState({numberOfLikes:a.state.isLiked?a.state.numberOfLikes-1:a.state.numberOfLikes+1}),a.setState({isLiked:!a.state.isLiked}),a.toggleLikeApi(a.state.id);else{var e=a.props.location;e.pathname="/p/"+a.props.match.params.pictureself+"/like",a.props.history.push({pathname:"/login",state:{from:e}})}},a.redirectToEdit=function(){a.props.history.push({pathname:"/p/"+a.props.match.params.pictureself+"/edit/"})},a.redirectToCustomize=function(){a.props.history.push({pathname:"/p/"+a.props.match.params.pictureself+"/customize/"})},a.state={id:a.props.match.params.pictureself,title:"",comment:"",date:"",username:"",name:"",avatar:"",isCustomizable:!1,isLiked:!1,numberOfLikes:0,likePopupIsVisible:!0,buttonsDivHeight:0,canvasDataURL:"",width:0,height:0,isLoading:!0},a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.fetchPictureselfDisplay()}},{key:"render",value:function(){var e=this;if(this.state.isLoading)return r.a.createElement("div",{style:{"margin-top":"35px"}},r.a.createElement(Qe,null));var t=this.state,a=t.width,n=t.height,i=t.canvasDataURL,s=a<300?(300-a)/2:0,o=n<300?(300-n)/2:0,c=""==this.state.avatar?"https://afcm.ca/wp-content/uploads/2018/06/no-photo.png":this.state.avatar,l={borderRadius:3,opacity:.8,"padding-top":"0.25em","padding-bottom":"0.25em","padding-left":"0.5em","padding-right":"0.5em"},u=this.state.isCustomizable?r.a.createElement("div",{id:"p-customize-button",onClick:this.redirectToCustomize},"CUSTOMIZE"):r.a.createElement("div",null),d=n<300?300:n,h=d-this.state.buttonsDivHeight,p=this.state.date,m=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sept","Oct","Nov","Dec"],f="";""!=p&&(f=("0"===p[5]?m[parseInt(p[6])-1]:m[parseInt(p.substr(5,2))-1])+" "+("0"===p[8]?p[9]:p.substr(8,2))+", "+p.substr(0,4));var g=de.getState().auth.username==this.state.username?r.a.createElement("div",{id:"p-edit-button"},r.a.createElement(E.a,{onClick:this.redirectToEdit,basic:!0},"Edit")):null;return r.a.createElement("div",{id:"p-container"},r.a.createElement("div",{id:"p-background"}),r.a.createElement("div",{id:"p-outer"},r.a.createElement("div",{id:"p-inner"},g,r.a.createElement("img",{alt:this.state.title,src:i,style:{"padding-left":s,"padding-right":s,"padding-top":o,"padding-bottom":o,"border-right":"1px solid rgb(235, 235, 235)"}}),r.a.createElement("div",{id:"p-menu",style:{height:d}},r.a.createElement("div",{id:"p-info",style:{height:h}},r.a.createElement("p",{id:"p-title"},this.state.title),r.a.createElement(b.a,{to:"/".concat(this.state.username,"/")},r.a.createElement("div",{id:"p-channel"},r.a.createElement("img",{src:c,alt:"Avatar",id:"p-avatar"}),r.a.createElement("p",{id:"p-name"},this.state.name))),r.a.createElement("p",{id:"p-date"},f),r.a.createElement("div",{id:"p-comment"},r.a.createElement(_t.a,{tagName:"p"},this.state.comment))),r.a.createElement("div",{id:"p-buttons"},u,r.a.createElement("div",{id:"p-like-download-buttons",ref:function(t){return e.buttonsDiv=t}},r.a.createElement(O.a,{position:"top center",mouseEnterDelay:750,verticalOffset:3,trigger:r.a.createElement("a",{href:i,download:"".concat(this.state.title,".png")},r.a.createElement(E.a,{style:{padding:"10px","margin-right":"5px",backgroundColor:"transparent"},icon:!0},r.a.createElement(k.a,{size:"large",name:"arrow down"}))),content:"Download",size:"large",style:l,inverted:!0,basic:!0}),r.a.createElement(O.a,{position:"top center",mouseEnterDelay:750,verticalOffset:-5,disabled:!this.state.likePopupIsVisible,trigger:r.a.createElement(E.a,{as:"div",style:{"margin-left":"-10px",backgroundColor:"transparent"},labelPosition:"right",onClick:this.toggleLike},r.a.createElement(E.a,{style:{padding:"10px",backgroundColor:"transparent"},icon:!0},r.a.createElement(k.a,{size:"large",name:this.state.isLiked?"heart":"heart outline",color:"red"})),r.a.createElement(Ht.a,{style:{backgroundColor:"transparent",color:this.state.isLiked?"rgb(215, 55, 55)":"",padding:"0px"},as:"a"},0==this.state.numberOfLikes?"":this.state.numberOfLikes)),content:this.state.isLiked?"Unike":"Like",size:"large",style:l,inverted:!0,basic:!0}))))),r.a.createElement("div",{id:"p-post-inner-space"})))}}]),t}(n.Component)),Gt=(a(561),function(e){function t(e){var a;return Object(h.a)(this,t),(a=Object(m.a)(this,Object(f.a)(t).call(this,e))).composeImages=function(){var e=a.state,t=e.customizationVariantImageUrls,n=e.featureVariantImageUrls,r=a.state.allFeatureIds.indexOf(a.state.activeFeatureId),i=t.slice(0,r),s=t.slice(r+1),o=[],c="";if(i.length>0){var l=bt(i).then(function(e){c=e.url});o.push(l)}var u="";if(s.length>0){var d=bt(s).then(function(e){u=e.url});o.push(d)}Promise.all(o).then(function(){var e=[],t=0;""!==c&&(e.push(c),t=1),""!==u&&(e.push(""),e.push(u));for(var r=function(r){e[t]=n[r],bt(e).then(function(e){a.setState(function(t){var a=Object(ft.a)(t.canvasDataURLs),n=Object(ft.a)(t.widths),i=Object(ft.a)(t.heights);return a[r]=e.url,n[r]=e.width,i[r]=e.height,{canvasDataURLs:a,widths:n,heights:i,imagesComposed:t.imagesComposed+1}})}).catch(function(e){alert(e)})},i=0;i<n.length;++i)r(i)})},a.fetchPictureselfFeaturesApi=function(e){return F.a.get(A+"features/p/"+e,he())},a.fetchChannelFeaturesApi=function(e){return F.a.get(A+"features/"+e,he())},a.fetchFeaturesApiPictureselfChannelSwitch=function(){return"pictureself"==a.props.type?a.fetchPictureselfFeaturesApi(a.props.id):a.fetchChannelFeaturesApi(a.props.id)},a.fetchFeatures=function(e){a.fetchFeaturesApiPictureselfChannelSwitch().then(function(t){a.setState({featureIds:t.data.feature_ids,featureTitles:t.data.feature_titles,allFeatureIds:t.data.all_feature_ids},function(){a.fetchPictureselfCustomizationVariants(e)})}).catch(function(e){var t=fe(e);alert(t)})},a.fetchPictureselfCustomizationPositionApi=function(e){return F.a.get(A+"customizations/"+e+"/",he())},a.fetchPictureselfCustomizationVariants=function(e){a.fetchPictureselfCustomizationVariantsApi(e).then(function(e){a.setState({customizationVariantImageUrls:e.data.variant_image_urls,customizationVariantAlts:e.data.variant_original_names},function(){a.handleActiveFeatureChange(a.state.featureIds[0])})}).catch(function(e){var t=fe(e);alert(t)})},a.fetchPictureselfCustomizationVariantsApi=function(e){return F.a.get(A+"p/"+e+"/customization-variants/",he())},a.fetchPictureselfFeatureVariants=function(e,t){a.fetchPictureselfFeatureVariantsApi(e,t).then(function(e){a.setState({featureVariantImageUrls:e.data.variant_image_urls,featureVariantAlts:e.data.variant_original_names,nImagesComposed:0,canvasDataURLs:[],widths:[],heights:[]},function(){a.composeImages()})}).catch(function(e){var t=fe(e);alert(t)})},a.fetchPictureselfFeatureVariantsApi=function(e,t){return F.a.get(A+"p/"+e+"/feature-variants/"+t+"/",he())},a.fetchPictureselfCustomizationPosition=function(e){a.fetchPictureselfCustomizationPositionApi(e).then(function(e){a.setState({activeOptionIndex:e.data.customization_position})}).catch(function(e){var t=fe(e);alert(t)})},a.editCustomizationPositionApi=function(e,t){return F.a.post(A+"customizations/"+e+"/edit/",{position:t},he())},a.handleActiveFeatureChange=function(e){var t=a.props.id;a.setState({activeFeatureId:e},function(){a.fetchPictureselfFeatureVariants(t,e),a.fetchPictureselfCustomizationPosition(e)})},a.handleActiveOptionChange=function(e){a.setState({activeOptionIndex:e}),a.editCustomizationPositionApi(a.state.activeFeatureId,e).then(function(t){var n=a.state,r=n.customizationVariantImageUrls,i=n.featureVariantImageUrls,s=(n.featureIds,n.allFeatureIds),o=n.activeFeatureId,c=Object(ft.a)(r);c[s.indexOf(o)]=i[e],a.setState({customizationVariantImageUrls:c})}).catch(function(e){var t=fe(e);alert(t)})},a.handleActiveFeatureChange=a.handleActiveFeatureChange.bind(Object(ct.a)(Object(ct.a)(a))),a.handleActiveOptionChange=a.handleActiveOptionChange.bind(Object(ct.a)(Object(ct.a)(a))),a.state={featureIds:[],featureTitles:[],allFeatureIds:[],activeFeatureId:0,activeOptionIndex:-1,customizationVariantImageUrls:[],customizationVariantAlts:[],featureVariantImageUrls:[],featureVariantAlts:[],canvasDataURLs:[],widths:[],heights:[],nImagesComposed:0},a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.id;this.fetchFeatures(e)}},{key:"render",value:function(){for(var e=this,t=this.props.isAuthenticated,a=this.state,n=a.activeOptionIndex,i=a.widths,s=a.heights,o=a.canvasDataURLs,c=a.featureVariantAlts,l=a.nImagesComposed,u=[],d=0;d<i.length;d++)if(void 0!==i[d]){var h=i[d]>200?s[d]*(200/i[d]):s[d]+(200-i[d]);u[d]=h}for(var p=this.state.featureIds.map(function(t,a){return r.a.createElement(E.a,{basic:!0,key:t,onClick:function(){return e.handleActiveFeatureChange(t)},content:""===e.state.featureTitles[a]?"*":e.state.featureTitles[a],active:e.state.activeFeatureId==t,size:"large",style:{filter:"brightness(109%)","margin-right":"7px","margin-bottom":"5px"},compact:!0})}),m=[],f=function(t){var a=o[t];void 0!==a&&m.push(r.a.createElement("div",{key:t.toString(),onClick:function(){return e.handleActiveOptionChange(t)},style:{width:"200px",height:u[t].toString()+"px","box-shadow":"0px "+u[t].toString()+"px inset rgba(175,175,175,0.075)",border:t==n?"5px solid DodgerBlue":0==t&&-1==n?"5px solid Silver":""}},r.a.createElement("img",{alt:c[t],src:a,style:{"max-width":"100%",width:t==n&&i[t]>192?192..toString():"",height:"auto",margin:t==n||0==t&&-1==n?(192>i[t]?(192-i[t])/2:"0")+"px":(200>i[t]?(200-i[t])/2:"0")+"px","z-index":"-1",position:"relative"}})))},g=0;g<o.length;++g)f(g);var v=l===c.length;return t?r.a.createElement("div",null,r.a.createElement(b.a,{to:"pictureself"==this.props.type?"/p/".concat(this.props.id,"/"):"/".concat(this.props.id,"/")},r.a.createElement(E.a,{style:{backgroundColor:"transparent","margin-left":"10px","margin-top":"5px",color:"rgb(26, 141, 255)","font-size":"18px"},icon:!0},r.a.createElement(k.a,{style:{"padding-right":"25px",color:"rgb(0, 128, 255)"},name:"check"}),"DONE")),r.a.createElement("div",{id:"feature-menu"},p),r.a.createElement("br",null),r.a.createElement(vt.a,{monitorImagesLoaded:!0,columnWidth:200,gutterWidth:10,gutterHeight:10,duration:0},m),r.a.createElement("div",{style:{"margin-top":"35px",visibility:v?"visible":"hidden"}},r.a.createElement(Qe,null))):r.a.createElement("p",null,"Customization isn't available when logged out.")}}]),t}(n.Component)),Bt=function(e){function t(){return Object(h.a)(this,t),Object(m.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this.props.isAuthenticated,t="pictureself"in this.props.match.params?"pictureself":"channel",a="pictureself"==t?this.props.match.params.pictureself:this.props.match.params.username;return r.a.createElement(Gt,{isAuthenticated:e,type:t,id:a})}}]),t}(n.Component),Qt=Object(o.b)(function(e){return{isAuthenticated:e.auth.isAuthenticated}})(Bt),qt=function(e){function t(e){var a;return Object(h.a)(this,t),(a=Object(m.a)(this,Object(f.a)(t).call(this,e))).fetchPictureselfsIndexApi=function(){return F.a.get(A+"p/index/",he())},a.fetchPictureselfsIndex=function(){a.fetchPictureselfsIndexApi().then(function(e){a.setState({pictureselfs:e.data},function(){a.setState({isLoading:!1})})}).catch(function(e){var t=fe(e);alert(t)})},a.state={pictureselfs:[],isLoading:!0},a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.fetchPictureselfsIndex()}},{key:"render",value:function(){if(this.state.isLoading)return r.a.createElement("div",{style:{"margin-top":"35px"}},r.a.createElement(Qe,null));return r.a.createElement(Ot,{columnWidth:200,gutterWidth:10,gutterHeight:20,pictureselfs:this.state.pictureselfs})}}]),t}(n.Component),Jt=(a(562),function(e){function t(){return Object(h.a)(this,t),Object(m.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("p",{id:"about-title"},"About"))}}]),t}(n.Component)),Kt=Object(v.a)(Jt),Xt=(a(563),function(e){function t(){return Object(h.a)(this,t),Object(m.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("p",{id:"blog-title"},"Blog"))}}]),t}(n.Component)),Yt=Object(v.a)(Xt),Zt=(a(564),function(e){function t(){return Object(h.a)(this,t),Object(m.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=["square face shape","mouth","nose","green eyes","eyebrows","glasses","hait","hat"].reverse().map(function(e,t){return r.a.createElement("p",{style:{margin:"auto","margin-bottom":"5px","text-align":"center",width:"350px","border-style":4==t||7==t?"solid":"dashed","border-width":"1px"}},e," layer")});return r.a.createElement("div",null,r.a.createElement("p",{id:"help-title"},"Help"),r.a.createElement("p",{id:"help-howitworks-title"},"How It Works"),r.a.createElement("p",{id:"help-howitworks"},"A ",r.a.createElement("b",null,"pictureself")," consists of customizable layers represented through ",r.a.createElement("b",null,"features"),".",r.a.createElement("br",null),'For example, "face shape" + "mouth" + "nose" + "eyes" + "eyebrows" + "glasses" + "hair" + "hat".',r.a.createElement("br",null),r.a.createElement("br",null),"A feature can have different implementations - ",r.a.createElement("b",null,"variants"),': "face shape" - ["round", "oval", "square" etc.], "eyes" - ["brown","blue","green" etc.]',r.a.createElement("br",null),r.a.createElement("br",null)," Implementation depends on ",r.a.createElement("b",null,"customization")," performed by a user.",r.a.createElement("br",null),'So if a user choses, for example, "face shape" as "square" and "eyes" as "green" the pictureself will be composed as follows:',r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("p",{style:{"text-align":"center"}},e),r.a.createElement("br",null),"Including a feature in different pictureselfs(surprised, angry, happy etc.) means different implementation with the same customization."," ",r.a.createElement("br",null),'Thus if a user have already chosen "green"for "eyes" feature - in the pictureself that represents, for example, a surprised state - customization remains - eyes would be green but widened.',r.a.createElement("br",null),"This means that the creator includes feature and provides corresponding variants in the same order: for eyes that would be brown widened, blue widened, green widened.",r.a.createElement("br",null),r.a.createElement("br",null),"In general, a feature is just the index of the variant chosen by a user. So if a user chooses green that means that whenever this feature is included in other pictureselfs for this particular user the variant number 3 would be displayed.",r.a.createElement("br",null)," ",r.a.createElement("br",null),'If implementation of included feature should be the same as in the original pictureself "import variants" checkbox can be used to import corresponding images.'))}}]),t}(n.Component)),$t=Object(v.a)(Zt),ea=(a(565),function(e){function t(){return Object(h.a)(this,t),Object(m.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("p",{id:"privacy-title"},"Privacy"))}}]),t}(n.Component)),ta=Object(v.a)(ea),aa=(a(566),function(e){function t(){return Object(h.a)(this,t),Object(m.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("p",{id:"terms-title"},"Terms"))}}]),t}(n.Component)),na=Object(v.a)(aa),ra=(a(567),function(e){function t(e){var a;return Object(h.a)(this,t),(a=Object(m.a)(this,Object(f.a)(t).call(this,e))).fetchPictureselfsSearchApi=function(){return F.a.get(A+"p/search/"+a.props.location.search.substring(3,a.props.location.search.length),he())},a.fetchPictureselfsSearch=function(){a.fetchPictureselfsSearchApi().then(function(e){a.setState({pictureselfs:e.data},function(){a.setState({isLoading:!1})})}).catch(function(e){var t=fe(e);alert(t)})},a.state={pictureselfs:[],isLoading:!0},a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.fetchPictureselfsSearch()}},{key:"componentDidUpdate",value:function(e){this.props.location.search!==e.location.search&&this.fetchPictureselfsSearch()}},{key:"render",value:function(){var e=this.state.isLoading,t=0==this.state.pictureselfs.length?r.a.createElement("p",{id:"search-no-results-message"},"No results"):null;if(e)return r.a.createElement("div",{style:{"margin-top":"35px"}},r.a.createElement(Qe,null));return r.a.createElement("div",null,t,r.a.createElement(Ot,{columnWidth:200,gutterWidth:10,gutterHeight:20,pictureselfs:this.state.pictureselfs}))}}]),t}(n.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(r.a.createElement(o.a,{store:de},r.a.createElement(d.a,{loading:r.a.createElement(Qe,null),persistor:ue},r.a.createElement(c.a,null,r.a.createElement(n.Fragment,null,r.a.createElement("header",{className:"header-background"}),r.a.createElement("div",{className:"app-layout"},r.a.createElement(He,null),r.a.createElement(l.a,null,r.a.createElement(u.a,{path:"/browse",component:Lt}),r.a.createElement(u.a,{path:"/about",component:Kt}),r.a.createElement(u.a,{path:"/blog",component:Yt}),r.a.createElement(u.a,{path:"/help",component:$t}),r.a.createElement(u.a,{path:"/privacy",component:ta}),r.a.createElement(u.a,{path:"/terms",component:na}),r.a.createElement(u.a,{path:"/login",component:mt}),r.a.createElement(Mt,{path:"/likes",component:Nt}),r.a.createElement(Mt,{path:"/subscriptions",component:Tt}),r.a.createElement(u.a,{path:"/search",component:ra}),r.a.createElement(u.a,{path:"/p/:pictureself/customize",component:Qt}),r.a.createElement(Mt,{path:"/p/:pictureself/edit",component:Vt}),r.a.createElement(u.a,{path:"/p/:pictureself/like",component:Wt}),r.a.createElement(u.a,{path:"/p/:pictureself",component:Wt}),r.a.createElement(u.a,{exact:!0,path:"/",component:qt}),r.a.createElement(u.a,{path:"/:username/customize",component:Qt}),r.a.createElement(u.a,{path:"/:username",component:St}),r.a.createElement(u.a,{component:Pt})),r.a.createElement("br",null)),r.a.createElement(ot,null))))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[290,1,2]]]);
//# sourceMappingURL=main.f6270118.chunk.js.map